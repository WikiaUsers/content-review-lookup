/**
 * Name:        block-button
 * Version:     v1.0
 * Author:      Caburum
 * Description: Adds an icon to a user's profile to quicly block them
**/

mw.loader.using('ext.fandom.ContentReview.legacyLoaders.js').then(function() {
	var user = mw.config.get('profileUserName');

	if (!user || window['gadget-block-button-loaded'] || user === mw.config.get('wgUserName')) return;
	window['gadget-block-button-loaded'] = true;

	window['gadget-block-button-icon'] = window['gadget-block-button-icon'] || '<svg version="1.1" viewBox="4.26 7.48 237.79 310.13" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" style="color: transparent"> <path d="m155.42 182.7c-8.345 3.874-8.906 4.728-15.463 8.305-8.345 4.769-21.196 7.323-17.619 17.457 5.961 16.69 51.3 17.823 65.606 18.419-11.371-0.157-31.331 0-40.869 0.228-11.708 0.278-21.161 3.38-14.008 16.494 7.153 12.518 51.316 6.038 63.834 4.25-10.133 1.191-11.647-2.439-9.292 7.271 1.789 7.372 2.499 5.609 15.167 1.384l23.58-12.905 14.207-23.666-5.701-27.42-17.149-13.567-16.691-7.354-45.602 11.104z" fill="#00FEDA"/> <path d="m170.92 200.66c2.62 3.497 11.127 6.561 15.697 10.236 3.11 2.502 14.279 11.397 18.031 12.813 3.462 1.309 5.003 1.729 8.495 2.881 5.909 1.951 11.895 1.258 15.3 0.69 3.829-0.64 7.211-1.137 10.105-3.961-0.196 0.923-0.838 1.215-1.323 1.99-0.708 1.132-0.942 2.445-1.425 3.78-1.232 3.404-2.93 6.698-4.432 9.984-2.204 4.822-7.803 7.646-12.517 9.619-4.446 1.863-8.629 4.379-12.862 6.563-1.661 0.856-3.992 1.94-5.95 1.832-2.948-0.16-6.843-2.893-9.343-4.56-4.423-2.945-5.481-6.392-8.097-10.783-2.769-4.646-3.924-10.01-5.58-15.095-1.236-3.795-1.604-7.687-2.422-11.481-0.437-2.022-4.748-13.078-3.677-14.508" fill="#00ADC3"/> <path d="m201.15 259.7c10.967-3.771 22.1-7.317 28.802-17.474 3.439-5.211 7.534-10.524 9.772-16.364 2.946-7.687 2.784-15.365 1.237-23.346-1.368-7.057-3.896-12.402-9.288-17.236-5.514-4.944-12.566-8.919-19.418-11.625-15.881-6.269-34.19-1.437-49.749 3.353-3.072 0.946-1.761 5.772 1.329 4.821 13.665-4.207 28.067-7.958 42.357-4.792 6.499 1.439 12.302 5.038 17.798 8.657 6.418 4.227 10.049 9.072 11.799 16.533 1.638 6.981 1.942 13.844-0.28 20.721-1.904 5.895-6.277 11.057-9.56 16.262-5.834 9.251-16.348 12.306-26.13 15.668-3.029 1.042-1.727 5.873 1.331 4.822z"/> <path d="m100.09 117.01c16.354 29.68 38.681 69.11 57.704 97.463 9.512 14.178 55.936 91.217 55.936 91.217 2.738 3.231 9.704 11.484 14.694 9.07 6.379-3.37 3.856-7.775 1.866-11.779 0 0-28.257-47.328-34.39-58.458-6.025-11.716-39.999-65.855-49.132-82.083-12.374-21.674-28.089-48.854-29.833-55.842" fill="#74422E"/> <path d="m97.929 118.28c35.443 64.288 75.683 125.71 113.57 188.57 3.122 5.179 11.012 12.658 17.585 10.332 7.75-2.743 6.238-10.629 2.937-16.163-7.599-12.735-15.172-25.486-22.691-38.27-16.621-28.256-33.319-56.417-50.29-84.474-6.783-11.212-13.277-22.582-19.753-33.974-4.288-7.543-8.542-15.107-12.632-22.76-2.647-4.952-5.815-10.143-7.313-15.599-0.852-3.105-5.676-1.786-4.821 1.329 2.213 8.065 7.206 15.746 11.182 23.011 6.242 11.404 12.802 22.629 19.196 33.948 8.688 15.378 18.187 30.321 27.38 45.398 16.454 26.986 31.986 54.502 48.135 81.673 2.531 4.259 5.065 8.516 7.604 12.77 0.684 1.146 1.222 2.42 1.675 3.669 0.793 2.187-0.622 4.655-3.107 4.965-1.285 0.16-2.622-0.813-3.642-1.441-2.555-1.574-5.683-4.539-7.248-7.135-5.75-9.539-11.518-19.068-17.294-28.591-18.271-30.121-37.503-59.627-55.861-89.679-14.051-23.001-27.287-46.5-40.298-70.101-1.555-2.822-5.873-0.3-4.316 2.525z"/> <path d="m122.14 204.73c-3.888 5.703-5.461 10.21-1.885 20.344 5.961 16.689 47.426 2.98 61.732 3.575-11.371-0.157-27.736 2.97-37.273 3.196-11.708 0.278-27.825 1.9-20.671 15.014 7.153 12.518 54.384 4.55 66.902 2.762-10.134 1.192-42.773 0.705-52.311 4.296-21.738 8.184 2.641 18.905 12.172 17.671 10.679-1.382 40.979-6.35 46.94-15.291s0.965-25.519-3.207-35.057c-5.961-13.71-30.794-13.215-48.354-10.343 0 0-19.635-4.759-26.521-5.704" fill="#00FEDA"/> <path d="m184.51 264.11c-5.042-0.02-9.73 1.021-15.374 1.027-4.714 6e-3 -12.839 1.224-17.386-0.199-3.72-1.163-6.366-1.86-9.736-3.874-2.416-1.442-4.275-2.978-4.571-5.974l-5.029 3.987 3.042 10.136 14.183 1.889 18.9-2.189 15.971-4.803z" fill="#09ABC1"/> <path d="m167.64 248.7c-9.798-2.05-21.804-2.265-31.302-5.779-3.172-1.174-5.589-2.339-7.444-4.95-0.91-1.282 1.918-4.832 1.39-6.303l-8.633 7.147 3.473 8.586 18.338 3.827 24.178-2.528z" fill="#09ABC1"/> <path d="m170.92 226.34c-8.138-1.408-23.254-1.663-30.962-4.42-3.799-1.358-6.896-1.784-10.069-4.173-2.595-1.955-4.328-5.934-4.769-9.936-0.211-1.918-0.936-8.515-0.936-8.515l-5.683 9.444-1.297 15.373 10.497 7.548 43.219-5.321z" fill="#00ACC2"/> <path d="m121.27 205.01c4.8 8.454 15.405 8.467 23.982 8.396 13.062-0.107 26.012-4.573 38.874 0.07 9.435 3.406 11.951 16.661 12.833 25.368 0.436 4.302 0.443 9.13-1.473 13.102-2.33 4.83-10.651 7.854-15.387 9.45-9.452 3.186-20.607 4.76-30.515 5.886-4.578 0.521-9.32 0.824-13.079-2.281-4.336-3.582-3.572-8.074 1.941-9.282 17.248-3.779 34.182-8.25 51.2-13.072 3.176-0.899 6.353-1.809 9.555-2.61-0.443-1.607-0.886-3.215-1.329-4.822-10.513 2.876-21.066 5.594-31.713 7.931-11.199 2.458-24.806 6.379-36.334 4.178-2.571-0.491-3.477-1.937-4.802-4.283-2.69-4.765 3.428-7.387 6.895-8.469 6.384-1.991 13.918-1.449 20.57-2.327 14.433-1.904 28.876-4.455 43.069-7.698 2.709-0.619 2.152-5.281-0.665-4.911-10.172 1.338-20.051 4.635-30.189 6.3-6.904 1.133-13.975 1.624-20.946 2.174-5.456 0.431-11.125 0.795-16.528-0.264-11.849-2.322-4.578-19.937-0.333-26.171 3.64-5.346 9.281-6.5 15.18-8.827 2.963-1.17 1.673-6.007-1.329-4.822-6.633 2.618-12.942 4.116-17.377 10.064-3.764 5.048-6.2 10.854-7.082 17.094-0.594 4.198-0.649 10.578 2.619 13.851 7.771 7.782 24.018 4.221 33.569 3.297 8.121-0.786 16.099-1.865 24.08-3.584 6.089-1.313 12.153-3.298 18.337-4.111-0.222-1.637-0.443-3.273-0.665-4.911-16.012 3.659-32.451 6.764-48.806 8.345-7.571 0.732-15.405 0.288-21.881 5.019-5.995 4.381-4.736 12.727 0.683 17.158 3.417 2.794 8.821 2.557 12.954 2.41 7.501-0.265 15.006-1.634 22.361-3.046 13.358-2.564 26.548-5.985 39.663-9.572 3.111-0.852 1.799-5.605-1.329-4.822-16.957 4.25-33.566 9.787-50.588 13.809-5.798 1.369-15.588 0.928-18.151 7.499-2.729 6.998 3.928 13.475 10.035 15.469 8.117 2.65 19.087-0.931 27.143-2.505 10.98-2.146 21.543-4.155 30.516-11.416 6.236-5.045 5.811-15.157 4.774-22.274-1.193-8.183-3.555-17.916-10.015-23.622-8.128-7.18-21.511-6.17-31.463-5.369-9.148 0.736-28.674 6.008-34.537-4.317-1.591-2.808-5.911-0.29-4.317 2.518z"/> <path d="m179.6 209.62c6.323 2.368 10.36 4.99 10.509 8.417 0.193 4.443-7.884 5.356-10.246 6.26-1.562 0.597 6.726 0.425 4.937 0.756 1.429-0.399 4.966-0.93 8.51 0.691 1.853 0.848 2.958 2.909 3.321 3.653 0.611 1.257 0.631 4.176 0.025 5.446-0.924 1.946-3.224 2.492-4.947 3.386-1.309 0.677-2.574 1.602-3.778 2.46 1.262 0.173 1.36 0.15 2.615-0.023 3.846-0.536 5.174 0.455 6.007 1.526 1.658 2.132 1.592 7.401 1.192 9.736" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="3"/> <path d="m184.51 174.72c-7.071 0.283-20.333 4.756-27.121 6.455-4.525 0.851-15.612 6.314-14.481 12.829 2.263 12.18 33.998-0.081 39.938-2.915" fill="#00FED9"/> <path d="m174.78 197.21c-5.24 0.184-15.997-1.736-20.845-3.703-2.29-0.929-3.874-5.461-4.172-7.847l-9.801 6.855 4.105 6.784h18.363l12.35-2.089z" fill="#0AABC1"/> <path d="m185.96 171.34c-6.676 0.982-13.183 2.88-19.657 4.74-5.008 1.439-10.188 2.524-14.958 4.651-6.666 2.974-18.558 11.044-11.822 19.306 4.958 6.082 17.345 3.583 23.784 2.516 8.003-1.327 16.471-3.313 23.879-6.721 2.927-1.346 0.384-5.654-2.523-4.316-5.454 2.509-11.648 3.886-17.473 5.191-6.875 1.541-15.187 3.338-22.095 1.101-9.319-3.019 8.525-12.832 11.645-13.878 9.768-3.276 20.358-6.27 30.55-7.769 3.18-0.467 1.823-5.285-1.33-4.821z"/> <path d="m10.855 59.335c-3.305 3.83-4.949 9.926-4.259 15.255 0.756 6.221 23.186 63.447 29.392 66.577 10.839 5.182 21.191-0.36 31.399-3.798 23.894-8.329 88.028-38.438 98.169-42.769 12.157-5.375 12.844-12.299 7.469-24.456-5.672-12.135-26.881-52.716-33.834-57.884-8.187-5.675-19.684 0.549-28.47 2.986-7.917 2.075-41.931 15.032-51.753 19.638 0 1e-3 -40.654 16.134-48.113 24.451z" fill="#D2D2D5"/> <path d="m165.11 54.375s1.717 3.306 1.789 15.796c0.091 15.482-40.957 30.308-47.53 33.001-8.77 3.592-43.493 14.886-53.177 17.372-6.43 1.651-15.602-0.032-21.921-1.063-15.239-2.487-23.692-40.001-25.582-46.196-2.111-6.916-0.012-14.235 3.51-20.549l-12.326 7.883-3.432 16.854 27.166 61.132 16.46 4.678 123-53.525 3.158-13.145-11.12-22.238z" fill="#B7B7B7"/> <path d="m9.087 57.567c-10.096 12.899-2.001 27.685 3.141 40.781 5.466 13.923 10.761 29.391 19.378 41.747 5.074 7.276 15.915 6.18 23.449 4.188 9.176-2.425 18.263-6.341 27.054-9.933 18.386-7.511 36.486-15.73 54.57-23.935 7.432-3.372 14.852-6.77 22.283-10.145 5.704-2.59 12.174-4.682 16.483-9.413 5.987-6.571 2.502-16.16-0.793-23.102-3.592-7.566-7.512-14.986-11.479-22.361-4.575-8.507-9.297-16.964-14.534-25.084-3.637-5.64-7.419-11.785-14.71-12.654-9.637-1.149-19.807 3.717-28.829 6.715-8.969 2.98-17.808 6.38-26.617 9.796-10.646 4.128-21.104 8.565-31.594 13.047-7.261 3.103-14.459 6.364-21.508 9.924-5.574 2.819-11.941 5.815-16.294 10.429-2.21 2.343 1.319 5.885 3.535 3.535 4.997-5.296 12.827-8.478 19.249-11.613 7.535-3.678 15.234-7.032 22.978-10.245 13.615-5.649 27.215-11.254 41.062-16.333 7.92-2.905 15.967-5.338 23.952-8.046 5.262-1.785 13.387-4.551 18.2-0.3 2.324 2.053 4.037 4.912 5.734 7.468 9.983 15.036 18.405 31.395 26.244 47.634 2.011 4.165 3.864 8.673 3.642 13.376-0.243 5.121-5.976 7.917-10.013 9.667-5.32 2.306-10.577 4.764-15.853 7.169-18.002 8.208-36.011 16.407-54.182 24.236-7.957 3.428-15.948 6.8-24.07 9.819-5.231 1.944-10.492 3.931-15.839 5.527-4.795 1.432-13.739 2.839-17.364-1.316-3.942-4.519-6.353-11.039-8.84-16.405-3.764-8.12-7.187-16.399-10.472-24.723-4.161-10.542-12.701-25.344-4.427-35.916 1.962-2.506-1.55-6.071-3.536-3.534z"/> <path d="m83.661 41.828c-12.604-0.438-24.472 9.644-29.013 18.756-8.984 18.031-1.603 46.605 21.607 47.472 19.586 0.73 40.935-11.381 45.104-31.227 3.698-17.595-18.106-37.414-37.698-35.001zm-20.161 49.678c-3.716-6.339-5.59-13.867-3.698-21.067 1.443-5.49 5.126-11.996 9.548-15.633 2.471-2.033 8.995-4.498 14.03-5.191 4.307-0.627 7.093-0.08 9.441 0.155 1.506 0.149 1.974 0.193 3.403 0.9-5.467 7.586-9.245 16.059-13.893 24.174-2.612 4.563-11.025 19.828-12.705 22.854-2.683-1.205-4.194-2.897-6.126-6.192zm48.34-11.959c-3.708 11.898-17.842 17.236-28.835 19.291-2.385 0.445-4.625 0.655-6.723 0.563 3.088-6.181 19.837-36.75 25.905-44.988 1.492 1.208 2.852 2.467 4.014 3.538 6.135 5.65 8.084 13.743 5.639 21.596z" fill="#D30001" stroke="#000" stroke-miterlimit="10"/> <ellipse cx="191.98" cy="220.2" rx="1.868" ry="2.166"/> <ellipse cx="198.39" cy="239.44" rx="3.04" ry="3.061"/> </svg>';

	function findContainer() {
		var promise = $.Deferred(),
			interval = setInterval(function() {
				var $element = $('#userProfileApp .user-identity-header__actions');
				if ($element.length) {
					clearInterval(interval);
					promise.resolve($element);
				}
			}, 300);
		return promise;
	}

	function addButton($container) {
		$icon = $(window['gadget-block-button-icon']).addClass('wds-icon');
		$button = $('<a href="' + mw.util.getUrl('Special:Block/' + user) + '" class="user-identity-header__button"></a>').append($icon);
		$container.prepend($button);
	}

	$.when(findContainer()).then(addButton);
});