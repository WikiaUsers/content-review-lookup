//Rare Fish Calculator

//replace rareFishList from worldDefVars output here:
 var rareFishList=[{"id":"fish_rare_lion_violet",
	"name":"Violet Lionfish",
	"descriptionId":"The Violet Lionfish scare easy and can disappear in the blink of an eye!",
	"vitality":8200,
	"guiOrder":70,
	"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},
	"producingTime":{"duration":86400000,"timeWarp":1},
	"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":175000,"lowTool":0,"highTool":0},
	"timeEvent":0,
	"imageName":"FISHR Violet Lionfish.png"},
	{"id":"fish_rare_pajama_cardinal_green","name":"Green Pajama Fish","descriptionId":"Even if they are so small, the Green Pajama Fish are brave and almost nothing can hurt them.","vitality":800,"guiOrder":83,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":990,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Green Pajama Fish.png"},{"id":"fish_rare_parrot_green","name":"Green Parrotfish","descriptionId":"When Green Parrotfish crush coral, they are actually creating sand that can be found at the bottom of the ocean!","vitality":50,"guiOrder":32,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":250,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Green Parrotfish.png"},{"id":"fish_rare_lion_blue","name":"Blue Lionfish","descriptionId":"Few predators dare to prey on the Blue Lionfish, allowing it to swim through the reef waters in complete peace.","vitality":1200,"guiOrder":47,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":15000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Blue Lionfish.png"},{"id":"fish_rare_trumpet_yellow","name":"Yellow Trumpetfish","descriptionId":"Yellow Trumpetfish are very rare sea creatures. They usually sneak in, trying to be invisible to the rest of the reef's population.","vitality":500,"guiOrder":61,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":500,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Yellow Trumpetfish.png"},{"id":"fish_rare_stingray_turquise","name":"Turquoise Bluespotted Ray","descriptionId":"The Turquoise Bluespotted Ray just loves how its its color matches the blue ocean.","vitality":800,"guiOrder":58,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":8500,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Turquoise Bluespotted Ray.png"},{"id":"fish_rare_crab_vampire","name":"Red Vampire Crab","descriptionId":"The Red Vampire Crab found his way to Nemo's reef by a mere luck, but he has quickly gotten used to the large space of the ocean.","vitality":9000,"guiOrder":68,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":4000,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Red Vampire Crab.png"},{"id":"fish_rare_mandarin_grey","name":"Grey Mandarinfish","descriptionId":"The name of the Mandarinfish comes from their vivid coloration that evokes the robes of a Chinese mandarin.","vitality":35000,"guiOrder":95,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":43200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":100000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Grey Mandarinfish.png"},{"id":"fish_rare_short_seamoth_yellow","name":"Short Yellow Seamoth","descriptionId":"Some say that the Short Yellow Seamoth fears nothing, but just like any other fish they are afraid of the sharks.","vitality":2200,"guiOrder":72,"producedReward":{"virtualMoney":0,"hardMoney":2,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":30000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Short Yellow Seamoth.png"},{"id":"fish_rare_bicolor_angelfish_red","name":"Red-Yellow Bicolor Angelfish","descriptionId":"The Bicolor Angelfish is also known as the Two-colored Angelfish or Oriole Angelfish.","vitality":650,"guiOrder":71,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":2500,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Red-Yellow Bicolor Angelfish.png"},{"id":"fish_rare_emperor_angle_fish_pink","name":"Pink Emperor Angelfish","descriptionId":"The Pink Emperor Angelfish prefers to seek shelter in caves and under ledges and changes coloration as it grows from juvenile to adult.","vitality":80,"guiOrder":33,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":250,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Pink Emperor Angelfish.png"},{"id":"fish_rare_pajama_cardinal_white","name":"White Pajama Fish","descriptionId":"The White Pajama Fish is a slow swimmer and it likes to hide amongst rocks or plants.","vitality":1500,"guiOrder":60,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":200,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR White Pajama Fish.png"},{"id":"fish_rare_stingray_green","name":"Green Bluespotted Ray","descriptionId":"It's always hard to see the Green Bluespotted Ray when it hides in the green seagrass.","vitality":450,"guiOrder":84,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":690,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Green Bluespotted Ray.png"},{"id":"fish_rare_clown_frogfish_yellow","name":"Yellow Clown Frogfish","descriptionId":"The Yellow Clown Frogfish can walk along the bottom of the ocean using its fins as legs!","vitality":10000,"guiOrder":56,"producedReward":{"virtualMoney":0,"hardMoney":3,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":300000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Yellow Clown Frogfish.png"},{"id":"fish_rare_emperor_angle_fish_blue","name":"Blue Emperor Angelfish","descriptionId":"Blue Emperor Angelfish are reef fish that love to hide and are usually found where there is a large amount of algae.","vitality":2000,"guiOrder":49,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":20000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Blue Emperor Angelfish.png"},{"id":"fish_rare_mandarin_pink","name":"Pink Mandarinfish","descriptionId":"One of the most attractive fish in the ocean, the Pink Mandarinfish prefers to keep to themselves during the day but likes to lounge on coral branches at night.","vitality":8500,"guiOrder":55,"producedReward":{"virtualMoney":0,"hardMoney":3,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":200000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Pink Mandarinfish.png"},{"id":"fish_rare_trumpet_pink","name":"Pink Trumpetfish","descriptionId":"Trumpetfish like to swim vertically through the ocean, so that they blend with corals.","vitality":400,"guiOrder":81,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":500,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Pink Trumpetfish.png"},{"id":"fish_rare_bicolor_angelfish_green","name":"Yellow-Green Bicolor Angelfish","descriptionId":"Yellow-Green Bicolor Angelfish are stunning yellow, with a forest green back half.","vitality":1800,"guiOrder":90,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":9000,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Yellow-Green Bicolor Angelfish.png"},{"id":"fish_rare_stingray_blue","name":"Bluespotted Ribbontail Ray","descriptionId":"These wonderfully colored stingrays like to hide in the sand, so that only their eyes show.","vitality":500,"guiOrder":63,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":550,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Bluespotted Ribbontail Ray.png"},{"id":"fish_rare_pajama_cardinal_yellow","name":"Yellow Pajama Fish","descriptionId":"Yellow Pajama Cardinalfish are usually very lazy, but spring to life at the sight of a party.","vitality":600,"guiOrder":46,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":10000,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Yellow Pajama Fish.png"},{"id":"fish_rare_clown_frogfish_black","name":"Black Clown Frogfish","descriptionId":"What an unusual Frogfish! Definitely one of its kind in these waters.","vitality":2500,"guiOrder":66,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":18000,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Black Clown Frogfish.png"},{"id":"fish_rare_mandarin_orange","name":"Orange Mandarinfish","descriptionId":"A member of the dragonet family, the Orange Mandarinfish's small size makes it difficult to catch in the depths of the ocean.","vitality":200,"guiOrder":36,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":300,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Orange Mandarinfish.png"},{"id":"fish_rare_stingray_pink","name":"Pink Bluespotted Stingray","descriptionId":"The Pink Bluespotted Stingray is the true jewel of every reef.","vitality":30000,"guiOrder":69,"producedReward":{"virtualMoney":0,"hardMoney":5,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":43200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":500000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Pink Bluespotted Stingray.png"},{"id":"fish_rare_crab_green","name":"Green Vampire Crab","descriptionId":"The Green Vampire Crab is a very kind and slow creature, despite its rather scary name.","vitality":550,"guiOrder":78,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":625,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Green Vampire Crab.png"},{"id":"fish_rare_short_seamoth_orange","name":"Short Orange Seamoth","descriptionId":"The Short Orange Seamoth has large wing-like fins and their bodies are encased in thick, boney plates. They can often be found \"walking\" along the ocean floor.","vitality":3500,"guiOrder":51,"producedReward":{"virtualMoney":0,"hardMoney":2,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":60000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Short Orange Seamoth.png"},{"id":"fish_rare_pajama_cardinal_brown","name":"Golden Pajama Fish","descriptionId":"The Golden Pajama Cardinalfish look especially curious with their big round eyes.","vitality":600,"guiOrder":57,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":750,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Golden Pajama Fish.png"},{"id":"fish_rare_dusky_bat_pink","name":"Pink Dusky Batfish","descriptionId":"The graceful movement of the beautiful Pink Dusky Batfish often resembles flying.","vitality":3000,"guiOrder":64,"producedReward":{"virtualMoney":0,"hardMoney":2,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":8000,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Pink Dusky Batfish.png"},{"id":"fish_rare_dusky_bat_black","name":"Black Dusky Batfish","descriptionId":"Even though the Black Dusky Batfish may seem a little hostile, it is just as friendly as any other fish in the reef.","vitality":800,"guiOrder":67,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":850,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Black Dusky Batfish.png"},{"id":"fish_rare_hawk_red","name":"Red Hawkfish","descriptionId":"The Red Hawkfish has funny freckles on its face.","vitality":2000,"guiOrder":101,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":775,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Red Hawkfish.png"},{"id":"fish_rare_lion_orange","name":"Orange Lionfish","descriptionId":"Normally standoffish, Lionfish would rather live within rocky crevices.","vitality":600,"guiOrder":42,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":2000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Orange Lionfish.png"},{"id":"fish_rare_short_seamoth_brown","name":"Short Brown Seamoth","descriptionId":"Short Brown Seamoths enjoy a hardy diet of sea worms and other small invertebrates that they can find around the ocean floor.","vitality":500,"guiOrder":39,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":400,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Short Brown Seamoth.png"},{"id":"fish_rare_candelamoa_pink","name":"Candelamoa","descriptionId":"The gentle colors of the Candelamoa, the Pink Parrotfish, attract many curious eyes.","vitality":15000,"guiOrder":82,"producedReward":{"virtualMoney":0,"hardMoney":2,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":15000,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Candelamoa.png"},{"id":"fish_rare_short_seamoth_red","name":"Short Red Seamoth","descriptionId":"Short Red Seamoths are seldom seen under these depths. This unusual color may come from a recent moulting.","vitality":650,"guiOrder":62,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":2500,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Short Red Seamoth.png"},{"id":"fish_rare_mandarin_red","name":"Red Mandarinfish","descriptionId":"It is said that the Red Mandarin Fish can only be seen in the coral reef in late December. Whether it is true or not, remains a secret...","vitality":1200,"guiOrder":77,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":1300,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Red Mandarinfish.png"},{"id":"fish_rare_bicolor_angelfish_silver","name":"Silver Bicolor Angelfish","descriptionId":"Silver Bicolor Angelfish can be also called Pacific Rock Beauty Angelfish.","vitality":6000,"guiOrder":98,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":6500,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Silver Bicolor Angelfish.png"},{"id":"fish_rare_mandarin_yellow","name":"Yellow Mandarinfish","descriptionId":"Mandarinfish are live coral reef dwellers, need their space, and are very picky eaters.","vitality":5500,"guiOrder":53,"producedReward":{"virtualMoney":0,"hardMoney":2,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":120000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Yellow Mandarinfish.png"},{"id":"fish_rare_stingray_orange","name":"Orange Bluespotted Ray","descriptionId":"This Orange Bluespotted Ray can be found living in areas with sandy bottoms, near coral reefs.","vitality":820,"guiOrder":76,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":950,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Orange Bluespotted Ray.png"},{"id":"fish_rare_mandarin_olive","name":"Olive Mandarinfish","descriptionId":"Olive Mandarinfish are live coral reef dwellers. They need their space and are very picky eaters.","vitality":700,"guiOrder":43,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":3000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Olive Mandarinfish.png"},{"id":"fish_rare_trumpet_green","name":"Green Trumpetfish","descriptionId":"The Green Trumpetfish are the chameleons of the sea, changing colors to blend in to either protect itself or assist in hunting.","vitality":250,"guiOrder":37,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":300,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Green Trumpetfish.png"},{"id":"fish_rare_short_seamoth_green","name":"Short Mint Seamoth","descriptionId":"When the Short Mint Seamoth hides in the sea grass, it can be easily overlooked.","vitality":120,"guiOrder":94,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":280,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Short Mint Seamoth.png"},{"id":"fish_rare_bicolor_angelfish_gold","name":"Golden Bicolor Angelfish","descriptionId":"Golden Bicolor Angelfish are very active, always swimming around and pecking at the rocks.","vitality":1200,"guiOrder":85,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":3000,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Golden Bicolor Angelfish.png"},{"id":"fish_rare_lion_green","name":"White Lionfish","descriptionId":"This white beauty has many names, Turkey Fish, Dragon Fish and Scorpion Fish. His friends just call him the White Lion.","vitality":4000,"guiOrder":52,"producedReward":{"virtualMoney":0,"hardMoney":2,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":80000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR White Lionfish.png"},{"id":"fish_rare_dusky_bat_yellow","name":"Yellow Dusky Batfish","descriptionId":"Yellow Dusky Batfish are very fragile fish that are very shy and are intimidated by any fish bigger than themselves.","vitality":170,"guiOrder":35,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":300,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Yellow Dusky Batfish.png"},{"id":"fish_rare_short_seamoth_black","name":"Short Black Seamoth","descriptionId":"The Latin name for Seamoths is Pegasidae, which is derived from the mythical greek horses with wings.","vitality":1100,"guiOrder":97,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":1700,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Short Black Seamoth.png"},{"id":"fish_rare_lion_darkblue","name":"Dark Blue Lionfish","descriptionId":"Like all other lionfish, Dark Blue Lionfish hide in reef crevices during the day, coming out to feed at night in deeper waters.","vitality":750,"guiOrder":93,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":1500,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Dark Blue Lionfish.png"},{"id":"fish_rare_trumpet_violet","name":"Violet Trumpetfish","descriptionId":"Violet Trumpetfish tend to swim slowly, not wishing to arouse the interest of potential predators.","vitality":750,"guiOrder":65,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":550,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Violet Trumpetfish.png"},{"id":"fish_rare_stingray_darkblue","name":"Indigo Bluespotted Stingray","descriptionId":"While significantly faster than other rays, the Indigo Bluespotted Stingray can easily escape any unpleasant situation.","vitality":8500,"guiOrder":100,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":12000,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Indigo Bluespotted Stingray.png"},{"id":"fish_rare_emperor_angle_fish_violet","name":"Violet Emperor Angelfish","descriptionId":"Violet Emperor Angelfish like to bite corals and feed on all kinds of sponges.","vitality":800,"guiOrder":44,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":6000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Violet Emperor Angelfish.png"},{"id":"fish_rare_lion_red","name":"Red Lionfish","descriptionId":"Red Lionfish are in general the largest fish among this species.","vitality":400,"guiOrder":89,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":350,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Red Lionfish.png"},{"id":"fish_rare_dusky_bat_white","name":"Orange Dusky Batfish","descriptionId":"The Orange Dusky Batfish is easily startled and can hide for hours when they feel threatened.","vitality":450,"guiOrder":38,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":350,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Orange Dusky Batfish.png"},{"id":"fish_rare_clown_frogfish_orange","name":"Orange Clown Frogfish","descriptionId":"Orange Clown Frogfish likes to slowly swim among the corals.","vitality":15000,"guiOrder":74,"producedReward":{"virtualMoney":0,"hardMoney":3,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":400000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Orange Clown Frogfish.png"},{"id":"fish_rare_bicolor_angelfish_blue","name":"Yellow-Blue Bicolor Angelfish","descriptionId":"The Yellow-Blue Bicolor Angelfish is a vibrant yellow on the front half of its body and a deep blue on the back half.","vitality":20000,"guiOrder":75,"producedReward":{"virtualMoney":0,"hardMoney":4,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":450000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Yellow-Blue Bicolor Angelfish.png"},{"id":"fish_rare_crab_orange","name":"Orange Vampire Crab","descriptionId":"When the Orange Vampire Crab swims through the reef, it resembles a shining little sun.","vitality":3200,"guiOrder":88,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":3500,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Orange Vampire Crab.png"},{"id":"fish_rare_emperor_angle_fish_green","name":"Green Emperor Angelfish","descriptionId":"The Green Emperor Angelfish is a reef fish that loves to hide and is usually found where there are large amounts of algae.","vitality":2800,"guiOrder":50,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":35000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Green Emperor Angelfish.png"},{"id":"fish_rare_pajama_cardinal_red","name":"Red Pajama Fish","descriptionId":"The solicitous Red Pajama Cardinalfish fathers protect their eggs hiding them in the mouth.","vitality":4500,"guiOrder":92,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":12500,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Red Pajama Fish.png"},{"id":"fish_rare_hawk_violet","name":"Violet Hawkfish","descriptionId":"When this Hawkfish gets scared, it dashes very fast under a nearest rock or coral.","vitality":40000,"guiOrder":96,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":43200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":120000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Violet Hawkfish.png"},{"id":"fish_rare_clown_frogfish_red","name":"Red Clown Frogfish","descriptionId":"Frogfish exist in several bright colors, but this Red Clown Frogfish is definitely seldom seen among its fellows.","vitality":1000,"guiOrder":80,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":13000,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Red Clown Frogfish.png"},{"id":"fish_rare_parrot_red","name":"Red Parrotfish","descriptionId":"Red Parrotfish are algae lovers that use their teeth to break up coral to get to the algae inside.","vitality":1400,"guiOrder":48,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":16000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Red Parrotfish.png"},{"id":"fish_rare_lion_yellow","name":"Yellow Lionfish","descriptionId":"Don't be fooled by the regal looking stripes and fins of the Yellow Lionfish, their fins are venomous.","vitality":100,"guiOrder":34,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":250,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Yellow Lionfish.png"},{"id":"fish_rare_trumpet_red","name":"Red Trumpetfish","descriptionId":"Red Trumpetfish have long skinny bodies that often swim vertically to try and blend in with vertical coral.","vitality":850,"guiOrder":45,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":9000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Red Trumpetfish.png"},{"id":"fish_rare_parrot_blue","name":"Blue Parrotfish","descriptionId":"Every night, the Blue Parrotfish envelope themselves in a transparent cocoon-like pajamas, which protects them from nocturnal predators.","vitality":8000,"guiOrder":54,"producedReward":{"virtualMoney":0,"hardMoney":2,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":150000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Blue Parrotfish.png"},{"id":"fish_rare_short_seamoth_blue","name":"Short Blue Seamoth","descriptionId":"Seamoths don't have teeth, but they have a specially shaped mouth that allows them to suck the food in just like a vacuum cleaner.","vitality":1050,"guiOrder":86,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":2200,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Short Blue Seamoth.png"},{"id":"fish_rare_angelfish_flame","name":"Flame Angelfish","descriptionId":"The beautiful Flame Angelfish is one of those precious creatures that can lift anyones spirits with their mere presence.","vitality":10000,"guiOrder":79,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":25000,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Flame Angelfish.png"},{"id":"fish_rare_dusky_bat_green","name":"Green Dusky Batfish","descriptionId":"Green Dusky Batfish prefer solitude due to the frailty of their fins.","vitality":580,"guiOrder":41,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":172800000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":1000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Green Dusky Batfish.png"},{"id":"fish_rare_pajama_cardinal_violet","name":"Violet Pajama Fish","descriptionId":"Violet Pajama Fish is easy to spot among their favorite dark green seaweeds.","vitality":12000,"guiOrder":73,"producedReward":{"virtualMoney":0,"hardMoney":3,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":86400000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":350000,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR Violet Pajama Fish.png"},{"id":"fish_rare_parrot_violet","name":"Violet Parrotfish","descriptionId":"The Violet Parrotfish live in harmony with other species, and they are often found feeding together.","vitality":550,"guiOrder":59,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":800,"lowTool":0,"highTool":0},"timeEvent":1,"imageName":"FISHR Violet Parrotfish.png"},{"id":"fish_rare_clown_frogfish_green","name":"White Clown Frogfish","descriptionId":"White Clown Frogfish aren't the prettiest fish, but they are very good at blending in with reefs and rocks.","vitality":550,"guiOrder":40,"producedReward":{"virtualMoney":0,"hardMoney":1,"xp":0,"energy":0,"lowTool":0,"highTool":0},"producingTime":{"duration":259200000,"timeWarp":1},"producingCost":{"virtualMoney":0,"hardMoney":0,"energy":700,"lowTool":0,"highTool":0},"timeEvent":0,"imageName":"FISHR White Clown Frogfish.png"}];
//replace rareFishList

function cmpCost(a,b) {
	if(a.producingCost.energy< b.producingCost.energy) return -1;
	if(a.producingCost.energy> b.producingCost.energy) return 1;
	return 0;
}

//sort rare fish array
rareFishList.sort(function(a,b){
	if(a.vitality< b.vitality) return -1;
	if(a.vitality> b.vitality) return 1;
	//if(a.producingTime.duration> b.producingTime.duration) return -1;
	//if(a.producingTime.duration< b.producingTime.duration) return 1;
	//return 0;
	return cmpCost(a,b);
});

function fishImg(f) {
	var out='';
	out+='<img id="sel'+f.id+'" ';
	out+='src="'+f.wikiaUrl+'" ';
	out+='title="'+f.name+'\n';
	out+=fmtK(f.producingCost.energy)+' Algae\n';
	out+=f.producedReward.hardMoney+'p/'+fmtDuration(f.producingTime.duration)+'\n';
	//out+='guiOrder:'+f.guiOrder+'\n';
	out+='" ';
	out+=' />';
	return out;
}

var urlsFetched=0;
var urlFetchFailSafe=10;
var urlFetchMax=30;

//build lookup list: title -> rare fish array index
var urlTitleLookup=[];
for (var i=0; i<rareFishList.length; i++) {
  urlTitleLookup['File:'+rareFishList[i].imageName]=i; //lookup image name with spaces not _
}

//uses global "urlsFetched"
function fetchImgUrls() {
  urlFetchFailSafe--;
  if (urlFetchFailSafe<=0) return; //cancel if called too often to prevent endless loops

  var titles='';
  for (var i=urlsFetched; (i<rareFishList.length) && (i<urlsFetched+urlFetchMax); i++) {
    titles+=(titles!=''?'|':'')+'File:'+rareFishList[i].imageName.replace(/ /g,"_");
  }
  //$("#divResult").html(urlsFetched+' '+titles); //debug output

  $.getJSON('/api.php?action=query&prop=imageinfo&titles='+titles+'&iiprop=url&format=json',
    function(data) {
      for (var ix in data.query.pages) {
        var pg=data.query.pages[ix];
        urlsFetched++;
        if (typeof(urlTitleLookup[pg.title])!=='undefined') {
          rareFishList[urlTitleLookup[pg.title]].wikiaUrl=pg.imageinfo[0].url;
        }
      }
      if (urlsFetched<rareFishList.length)
        fetchImgUrls();
      else
        buildPage();
    });      
  
}

function showImages() {
  var out='';
  for (var i=0; i<rareFishList.length; i++) {
    var f=rareFishList[i];
    f.algPerPearl=f.producingCost.energy/f.producedReward.hardMoney;
    out+=fishImg(f);
  }
  $('#divSelection').html(out);
  $('#divSelection').delegate('img','click',function(){
    $(this).toggleClass('selected')
  });
}

function buildPage() {
  showImages();
}

$(function(){
  var pgout='<a href="#" onclick="$(\'#divSelection img\').addClass(\'selected\');return false;">(select all)</a>&nbsp;'+
        '<a href="#" onclick="$(\'#divSelection img\').removeClass(\'selected\');return false;">(select none)</a><br/>'+
        '<div id="divSelection">(Pleae wait a second, still catching rare fish...)</div>'+
        '<p>Algae:<input id="numAlgae" value="100000" size="7"><br/>'+
        '<input type="button" id="btnCalc" name="btnCalc" value="Calculate" /><br/>'+
        '<div id="divResult"></div>';

  $("p:contains('(Insert here)')").html(pgout);

  fetchImgUrls(); //continues in buildPage()

//button click-handler -> calculator script
  $("#btnCalc").click(function(){
		var out='';
		var outf='';
		var fish=[];
		var pDur=[];
		var dur=[];
		var nump=0;
		var numFed=0;		
		var alg=parseInt($('#numAlgae').val());
		
		$('#divSelection img').removeClass('feed');
		$('#divSelection img').removeClass('nonfed');
		//build list of selected fish
		for (var i=0; i<rareFishList.length; i++) {
			var f=rareFishList[i];
			if ($('#sel'+f.id).hasClass('selected')) {
				fish.push(f);
			}
		}
		fish.sort(function(a,b){
			if(a.algPerPearl< b.algPerPearl) return -1;
			if(a.algPerPearl> b.algPerPearl) return 1;
			
			if(a.producingTime.duration< b.producingTime.duration) return -1;
			if(a.producingTime.duration> b.producingTime.duration) return 1;
			return 0;
		});
		//check how many fish can be fed
		for (var i=0; i<fish.length; i++) {
			var f=fish[i];
			if (alg>f.producingCost.energy) {
				numFed++;
				$('#sel'+f.id).addClass('feed');
				alg-=f.producingCost.energy;
				nump+=f.producedReward.hardMoney;
				if (pDur[f.producingTime.duration])
					pDur[f.producingTime.duration]+=f.producedReward.hardMoney;
				else {
					pDur[f.producingTime.duration]=f.producedReward.hardMoney;
					dur.push(f.producingTime.duration);
				}
			}
			else
				$('#sel'+f.id).addClass('nonfed');
		}
		dur.sort(function (a,b) {return parseInt(a)-parseInt(b);});

		out+="Total Pearls spawned: "+nump+"<br/>";
		out+="Total Algae spent: "+(parseInt($('#numAlgae').val())-alg)+"<br/>";
		out+="Total Algae remaining: "+alg+"<br/>";
		out+="Total Fish to feed(green): "+numFed+"<br/>";
		out+="Total Fish unfed (red): "+(fish.length-numFed)+"<br/>";
		for (var i=0; i<dur.length; i++) {
			out+=" Pearls spawned after "+fmtDuration(dur[i])+": "+pDur[dur[i]]+"<br/>";
		}
		$('#divResult').html(out);

    });
});


//tool functions

function fmtK(value) {
   if (value && value>=10000) {
      return (value/1000)+"k";
   } else return value;
}

function fmtDuration(value) {
   value=Math.floor(value / 1000); //ms -> seconds
   hours=Math.floor(value / 3600);
   minutes=Math.floor((value % 3600) / 60);
   seconds=(value % 60);
   if ((hours>=24) && (minutes==0) && (seconds==0))
      return (hours/24)+'d'; //textLu('STR_TIME_DAYS_ABBR');
   var res=(hours<10 ? "0"+hours:hours)+
            ":"+(minutes<10 ? "0"+minutes:minutes)+
            ":"+(seconds<10 ? "0"+seconds:seconds); //+" ("+value+")";
   res=res.replace(/:00:00/,'h'); //textLu('STR_TIME_HOUR_ABBR')
   return res;
}