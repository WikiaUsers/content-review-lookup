(function () {
    const IMAGE_SOURCE = "URL";

    const replaceAvatars = function replaceAvatars(ui) {
        const oldAvatars = document.querySelectorAll("#MessageWall svg.wds-avatar__image:not(.replacement-avatar)");

        oldAvatars.forEach(function (oldAvatar) {
            const newAvatar = ui.svg({
                xmlns: "http://www.w3.org/2000/svg",
                viewBox: "0 0 186.67 187.08",
                classes: ["wds-avatar__image", "replacement-avatar"],
                children: [
                    ui.path({
                        d: "M93.333 0C41.925 0 .25 41.675.25 93.083c0 51.409 41.675 93.083 93.083 93.083s93.083-41.674 93.083-93.083C186.417 41.675 144.742 0 93.333 0zm0 180.167c-48.095 0-87.083-38.987-87.083-87.083S45.238 6 93.333 6s87.083 38.988 87.083 87.083c.001 48.096-38.987 87.084-87.083 87.084z",
                    }),
                    ui.path({
                        d: "M177.98 95.23c1.7.64 3.54 1.13 5.09 1.92l.06-1.48c-1.81-.3-3.66-.6-5.15-.44zm-45.9-19.29c-2-.9-4.52-4.76-6.65-3.32 1.21 1.67 4.54 1.22 4.65 3.99-.84.76-5.5 1.08-3.32 2.66 1.73-1.15 4.48-1.28 5.32-3.33zm-7.98 11.98c2.72-.16 3.5-2.26 5.99-2.66-.12-2.77-2.53-3.24-4-4.66-.11 2.34 2.25 2.19 2.67 4-1.26 1.4-3.83 1.48-4.66 3.32zm-9.98-2c2.3-.58 4.37-1.4 5.32-3.32-1.18-.21-2.6-3.52-3.99-1.33.89.66 2.48.63 2.66 2-1.25.96-3.46.97-3.99 2.65zm39.25-19.29c-1.94.12-4.7-2.33-6-.66 1.94-.12 4.7 2.33 6 .66zm-29.94 8.65c-2.67-.02-4.48-4.35-6.65-2.66 1.67 1.2 4.56 1.2 4.66 3.99-1.48.52-3.61.38-4 2 2.56-.55 5.7-.52 6-3.33zm55.76-8.72-.59-1.81c-7.54-.1-15.08-.15-22.57-.11 7.96 1.69 15.6 1.83 23.16 1.92zm-146.22 49.3c-1.63 1.29-5.11 8.2-.67 9.3-1.78-4.44 3.66-8 .67-9.3zm33.92-27.28c1 4.3 6.13 1.88 9.31 1.33 3.44.57 7.02 4.5 9.98 3.33-5.19-3.64-11.43-5.2-19.29-4.66zm81.82 42.58c-4.68-2.42-7.28-6.91-12.64-8.65 2.09-3.24 5.54-5.1 7.98-7.98-3.62-.5-5.34 6.62-10.64 6.65 2.05-4.83 6.1-7.66 8.65-11.98-4.3 2.8-6.92 7.28-10.65 10.65-14.16-5.24-35.1-2.62-48.55 2 13.29-8.9 29.11-15.24 43.9-22.62-7.8-1.74-14.24-4.84-19.3-9.32 1.72 2.95 5.84 9.24 12.65 9.32-20.77 12.72-49.44 17.52-54.55 45.9-4.3.86-9.42 3.47-13.3 2.66 1.12-2.2 2.61-4.04 5.98-4-.83-3.71 1.2-4.57 3.33-5.32v-4.65c1.71-4.16 6.03-6.04 7.98-11.31 2.3-6.22.9-13.36 4-16.63 4.74-5.03 12.07-2.9 17.95-7.32-13.27 2.32-38.37 10.92-39.9 26.6-4.9 5.32-14.42 6-15.3 15.3-10.43-3.1-13.96-16.64-14.64-27.26 2.89 3.1 2.66 9.3 4.65 13.3-.8-7.3 2.47-14.9 9.98-15.96.55 6.74-4.47 10.75-2 17.29.56-7.2 4.05-11.47 4-19.29-.73-1.53-3.27.66-4 1.33 6.51-9.68 23.3-14.83 28.61-27.94 1.77 2.13.92 4.3.66 7.32 5.1-1.56 9.85-3.46 9.98-9.98-.24-1.76-1.6-2.4-3.99-2 6.14-4.97 18.97-6.71 26.6-7.98-3.03-14.32 15.66-17.3 23.96-24.6.02 7.11-11.73 8.22-13.3 15.96 12.13-2.5 25.92-9.1 37.24-14.64.12.57-.26.63-.66.67-9.83 9.46-26.97 11.61-37.25 20.62.48 2.03-.68 2.42-.67 3.99 1.2 2.56 5.03 2.51 7.98 3.32-1.94 2.72-5.89 3.43-7.31 6.66 2.86-2.46 6.98-3.66 9.3-6.66-1.69-2.51-7.44-.97-7.97-4.65 1.96-4.92 6.9-3.33 13.3-4 12.17-1.25 19.6-8.08 26.6-15.3 8.09-.25 16.36-.5 24.77-.73-.38-.7-.78-1.4-1.18-2.08-6.6.42-13.34.71-20.26.82-1.29-2.86 9.3-7.46 14.92-8.93-.41-.56-.83-1.12-1.26-1.67-1.68.64-3.36 1.29-5 1.95-1.79-.77 1.72-1.73 1.99-2.66-17.16 2.8-31.23 14.45-48.56 19.3 10.44-12.43 27.82-19.1 46.75-24.3-.5-.55-1.01-1.09-1.53-1.63-4.01.92-8 1.8-11.96 2.64 3.32-1.55 6.72-3.02 10.16-4.45-.5-.5-1.02-.98-1.53-1.47-11.44 5.32-22.28 11.19-31.25 17.9-2-5.32-4.42-10.22-9.98-11.98 9.37-5.74 20.05-10.16 31.47-13.84-.63-.45-1.27-.88-1.9-1.31a161.34 161.34 0 0 0-10.28 3.84c2.3-1.84 4.8-3.75 7.4-5.67-.7-.43-1.41-.86-2.13-1.27-11.66 8.14-24.18 16.03-37.86 21.58-2.93-.62-3.4-3.7-5.99-4.66a458.9 458.9 0 0 1 37.12-20.41c-.84-.4-1.68-.77-2.53-1.13-22.55 10.28-43.8 22.2-61.2 38.17C61.34 54.38 43 67.6 40.96 75.94c-1.1 4.53.76 9.2 0 12.64-1.14 5.18-5.6 6.67-8.65 9.98-3.38 3.66-4.5 9.02-9.31 11.98-1.28 1.95-4.1-.18-4 1.99 2.97 14.34 5 29.6 20.63 31.26.3-2.52-1.73-4.73 0-6.65 1.44.56 2.27 1.73 4.65 1.33 1.47-1.4-.85-1.96-.66-3.99 4.53 1.5 3.8-3 3.99-3.99 6.92.72 2.82-9.6 9.98-8.65v-4.65c1.88-.55 1.72.94 3.32.66-.11-3-.32-6.09 2.66-5.98 1.28 6.01-5 10.46-4.65 15.3-3.94-.43-3.58 2.41-4 3.99-.96.36-3.43-.78-3.32.66 3.32 2.46-4 3.58-3.99 5.33-.93 2.75 3.23 3.8 1.33 5.32-2-.07-5.64-4.6-5.99-2 1.93 10.28 15.29 11.86 23.95 6.65 5.05-5.41 4.14-13.75 8.65-18.62 8.96-9.7 44.56-11.78 57.2-5.99 9.63 4.4 21.3 16.44 28.2 29.72l1.35-1.59c-3.55-6.8-7.77-12.94-12.92-18.15 6.79-4.97 14.61-8.9 21.29-13.97-6.07 2.8-14.77 8.73-21.95 12.64zm-1.33-85.81c-4.7 9.04-15.5 17.76-31.27 17.96 10.8-5.61 23.92-8.9 31.27-17.96zm-49.89-5.33c1.86-.58 3.29-1.59 5.32-2 .4 3.51-.5 5.72-.66 8.65 1.92-1.62 1.2-5.9 1.33-9.3 1.7-.3 3.05-.94 3.99-2 1.73 1.77.13 5.86 0 7.98 1.81-1.51 1.25-5.4 1.33-8.65 6-2.15 9.35 3.28 11.3 7.32.25 1.13-.51 1.25-1.32 1.33-1.33-2-2.5-4.16-4.66-5.32 1.22 2.1 3.48 3.16 4 5.98-8.68 6.98-25.68 8.75-23.96 23.95-13.03 2.51-21.68 2.71-29.26 9.31-3.5 3.04-4.27 7.67-7.32 11.31-2.73 3.25-7.98 5.9-11.97 9.31-6 5.14-11.52 8.84-16.63 14.64 1.84-8.36 13.3-12.86 18.62-19.96-.73-9.15 3.7-13.14 5.99-19.29 7.07.2 6.88-6.86 13.97-6.65 1.1-5.08 6.82-4.25 9.97-6.65 3.82-2.9 2.15-8.14 6.66-9.98 1.75-.2 2.18.92 2 2.66.9-.2.54-1.66.66-2.66-.09-1.47-2.83-.28-4-.66.59-3.63 5.65-2.78 8.65-4v5.33c1.51-.71.26-4.18.67-5.99-1.95-1.3-4.32 1.58-7.32 1.33 1.61-4.15 8.35-3.18 11.97-5.32-.36 2.96-.65 6-1.33 8.65 2.6-1.18 1.77-5.78 2-9.32zm-.66-1.33c-2.27-1.5-4.58-2.96-6-5.32 2.63-1.55 7.04 3.21 6 5.32zm-2-.66c-1.22 1.44-3.92 1.4-6.65 1.33.7-1.52.42-4.01 1.33-5.32a29.8 29.8 0 0 0 5.32 3.99zm-7.32-2.66c2.02.82-.72 2.29 0 3.99-1.48.52-2.6 1.4-4.65 1.33-.36-3.68 3.4-3.25 4.65-5.32zm-5.32 3.99c.39 2.6-2.73 1.7-3.32 3.33-1.02-.63 1.6-3.24 3.32-3.33zm7.32 1.33c4.27-.17-1.45.36-2.66 1.33-3.55 2.83-7.25 8.73-8.65 16.63-3.08.47-4.9 2.2-7.98 2.66 1.45-5.86 2.72-11.91 5.32-16.63 3.96-2.4 12.1-3.92 13.97-4zM72.2 46c1.34 4.07-3.75 13.05-4.65 19.3-2.48.4-4.18 1.58-6.66 1.99C60.01 55.54 67.07 51.73 72.2 46zM59.56 57.3c3.37 2.69-1.05 8.57 0 13.31-2.47.41-4.18 1.59-6.65 2-1.1-8.43 3.18-11.46 6.65-15.3zm-26.6 43.25c3-3.29 7.63-4.3 9.31-7.99 2.22-4.86-.67-9.95.67-15.96.9-4.12 6.2-6.04 7.98-9.98 1.53 1.8.23 6.42.66 9.32-3.57 4.4-4.75 11.21-5.98 17.96-8.76 6.32-17.84 12.3-19.96 25.27-1.2-7.88 2.32-13.16 7.32-18.62zM60.9 124.5c.08-.02.16-.06.24-.1 1.47-3.08 5.69-7.15 3.75-13.2 1.26-1.4 3.83-1.5 4.65-3.33 2.65 5.08-6.19 10.82-3.32 13.97-1.7.85-3.19 1.91-5.08 2.57-.1.2-.18.41-.26.61.23 1.54 2.86 2.69 1.35 3.48-1.63-1.04-1.82-2.17-1.35-3.48-.02-.17-.03-.34.02-.52zm-.67 10.65c1.1 5.35-5.71 3.26-5.32 0h5.32zm-3.33 5.32c.46 2.23-1.11 2.43-2.66 2.66a8.86 8.86 0 0 1-3.99-4c1.51 1.16 3.72 1.61 6.65 1.34zm-10.64 3.32c.34-1.76 3.8 2.29 4.66 0 .72.17.45 1.33 1.33 1.33-1.2 2.99-4.38-.62-5.99-1.33zM181.6 76.24a90.23 90.23 0 0 0-.92-4.24 342.52 342.52 0 0 0-25.3-4.04 863.23 863.23 0 0 1 26.22 8.28zm-27.56 3.7c-1.78 2.65-7.43 1.43-10.64 2.66 3.87.56 7.48 1.39 8.65 4.65-1.48 2.96-5.18 3.7-6.66 6.65 3.17-1.7 6.78-2.97 7.32-7.31h7.98c5.83 7.17-3.91 9.5-7.31 13.3 4.02-1.97 11.31-4.2 9.97-9.31 1.95-1.47 5.76.87 9.32 0 1.1 1.12 1.44 2.99 2.66 3.99-1.76 4.89-7.33 5.97-10.65 9.31 5.31-1.34 8.7-4.6 11.98-7.98.17-2.38-2-2.44-2-4.65 2.1.32 2.35-1.2 4.66-.67.03-1.14-.5-1.72-1.33-2 1.36.04 3.24.45 5.12 1.17a89.6 89.6 0 0 0-.1-2.14 365.56 365.56 0 0 1-14.34-7.67c4.74.77 9.4 1.82 13.94 3.08-.1-.9-.21-1.79-.34-2.67-12.73-3.63-25.78-7.02-39.54-9.06 2.47 4.18 8 5.3 11.31 8.65zm23.95 9.3c-4.63 1.3-13.11.7-15.97-1.99-.12-2.56 4.17-.7 5.33-2-1.91-2.96-3.95-5.8-7.32-7.31 5.07 2.03 13.61 6.34 17.96 11.3zm-12.64-5.31c-3.76 1.85-13.4 3.48-15.3-1.33 2.85.19 4.4-.93 5.99-2-2.2-2.69-5.59-4.17-7.99-6.65 4.43-.6 12.88 6.15 17.3 9.98zm14.81 32.27c.16-.58.31-1.17.45-1.76-4.68-3.92-10.61-6.8-17.92-8.56 7.34 2.32 13.1 5.76 17.47 10.32zm-45.4-25.62c2.24-1.52 5.57-1.96 6.64-4.66-1.34-1.32-2.17-3.14-3.99-3.99-.05 2.5 2.87 2.01 2 5.32-1.65.6-6.26 1.69-4.66 3.33zm47.4 16.08.19-1.38c-2.29 1.14-4.68 2.18-6.36 3.92 2.38-.49 4.33-1.55 6.17-2.54zM133.4 72.62c2.39 1.6 5.93 2.05 6.65 5.32-2.27.83-4.78 1.43-6.65 2.66 4.33.56 5.92-1.62 8.65-2.66-1.3-2.93-5.99-5.97-8.65-5.32zm42.44-15.1c-.2-.47-.4-.95-.62-1.42-11.37.98-22.7 2.03-33.84 3.21 11.2 2.47 22.85-.83 34.47-1.78z",
                    }),
                ],
            });

            oldAvatar.replaceWith(newAvatar);
        });
    };

    const init = function init(ui) {
        // Initial run to catch all of the avatars in case things load weirdly
        replaceAvatars(ui);

        // Run whenever the message wall is updated, for example when you press
        // the "View More Replies" or "View More Messages" buttons
        const messageWall = document.querySelector("#MessageWall");
        const observer = new MutationObserver(function () {
            replaceAvatars(ui);
        });
        observer.observe(messageWall, { childList: true, subtree: true });
    };

    importArticle({
        type: "script",
        article: "u:dev:MediaWiki:Dorui.js",
    });

    mw.hook("doru.ui").add(init);
})();