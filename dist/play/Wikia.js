/* Voting */
if (wgPageName === 'User_blog:Matt_Hadick/Beyond_Earth_CCA') {
	challengers = {};
 
 	//Destiny CCA Images
	challengers['Supremacy'] = 'https://vignette.wikia.nocookie.net/civilization/images/5/5b/SupremacyCCA.jpg';
	challengers['Purity'] = 'https://vignette.wikia.nocookie.net/civilization/images/e/ee/Puritycca.jpg';
	challengers['Harmony'] = 'https://vignette.wikia.nocookie.net/civilization/images/5/53/HarmonyCCA.jpg';
	challengers['Domination'] = 'https://vignette.wikia.nocookie.net/civilization/images/7/7a/DominationCCA.jpg';
	challengers['Contact'] = 'https://vignette.wikia.nocookie.net/dinos-vs-robots/images/e/ef/ContactIcon.png';
	challengers['Promised Land (Purity)'] = 'https://vignette.wikia.nocookie.net/civilization/images/6/6c/PromisedlandCCA.jpg';
	challengers['Transcendence (Harmony)'] = 'https://vignette.wikia.nocookie.net/civilization/images/b/b1/ContactCCA.jpg';	
	challengers['Emancipation (Supremacy)'] = 'https://vignette.wikia.nocookie.net/civilization/images/9/92/EmancipationCCA.jpg';		
 	challengers['Xeno Titan'] = 'https://vignette.wikia.nocookie.net/civilization/images/8/8d/XenotitanCCA.jpg';
	challengers['LEV Destroyer'] = 'https://vignette.wikia.nocookie.net/civilization/images/7/7f/LevdestroyerCCA.jpg';
	challengers['ANGEL'] = 'https://vignette.wikia.nocookie.net/civilization/images/9/97/AngelCCA.jpg';
	challengers['The Iron Pact'] = 'https://vignette.wikia.nocookie.net/civilization/images/3/3f/IronpactCCA.jpg';
	challengers['The Vesperian Confederacy'] = 'https://vignette.wikia.nocookie.net/civilization/images/0/00/VesperianConspiracyCCA.jpg';
	challengers['InfoAddict'] = 'https://vignette.wikia.nocookie.net/civilization/images/6/64/InfoaddictCCA.jpg';
	challengers['Colorful Tech Web'] = 'https://vignette.wikia.nocookie.net/civilization/images/a/a6/ColorfultechwebCCA.jpg';
	challengers['True Terraforming'] = 'https://vignette.wikia.nocookie.net/civilization/images/0/08/TrueterraformingCCA.jpg';
	challengers['American Reclamation Corporation (ARC)'] = 'https://vignette.wikia.nocookie.net/civilization/images/3/32/ARCCCA.jpg';
	challengers['Pan-Asian Cooperative (PAC)'] = 'https://vignette.wikia.nocookie.net/civilization/images/7/74/PACCCA.jpg';
	challengers['Franco-Iberia'] = 'https://vignette.wikia.nocookie.net/civilization/images/2/29/FrancoiberaCCA.jpg';
	challengers['Slavic Federation'] = 'https://vignette.wikia.nocookie.net/civilization/images/e/eb/SlavicFederationCCA.jpg';
	challengers['Polystralia'] = 'https://vignette.wikia.nocookie.net/civilization/images/3/30/PolystraliaCCA.jpg';
	challengers['Kavithan Protectorate'] = 'https://vignette.wikia.nocookie.net/civilization/images/4/47/KavithanProtectorateCCA.jpg';
	challengers['Brasilia'] = 'https://vignette.wikia.nocookie.net/civilization/images/9/93/BrasiliaCCA.jpg';
	challengers['People\'s African Union (PAU)'] = 'https://vignette.wikia.nocookie.net/civilization/images/a/a2/PAUCCA.jpg';
	challengers['Kraken'] = 'https://vignette.wikia.nocookie.net/civilization/images/4/4c/KrakenCCA.jpg';
	challengers['Sea Dragon'] = 'https://vignette.wikia.nocookie.net/civilization/images/4/47/SeaDragonCCA.jpg';
	challengers['Manticore'] = 'https://vignette.wikia.nocookie.net/civilization/images/2/2f/ManticoreCCA.jpg';
	challengers['Siege Worm'] = 'https://vignette.wikia.nocookie.net/civilization/images/1/1c/SiegewormCCA.jpg';
	challengers['Raptor Bug'] = 'https://vignette.wikia.nocookie.net/civilization/images/3/3d/RaptorbugCCA.jpg';
	challengers['Rocktopus'] = 'https://vignette.wikia.nocookie.net/civilization/images/2/21/RocktopusCCA.jpg';
	challengers['Planet Carver'] = 'https://vignette.wikia.nocookie.net/civilization/images/d/d4/PlanetcarverCCA.jpg';
	challengers['Deep Space Telescope'] = 'https://vignette.wikia.nocookie.net/civilization/images/4/4b/DeepspacetelescopeCCA.png';
	challengers['All-Seer'] = 'https://vignette.wikia.nocookie.net/civilization/images/6/6f/AllseerCCA.jpg';
	challengers['Beacon'] = 'https://vignette.wikia.nocookie.net/civilization/images/7/74/BeaconCCA.png';
	challengers['Emancipation Gate'] = 'https://vignette.wikia.nocookie.net/civilization/images/8/83/EmancipationgateCCA.png';
	challengers['Exodus Gate'] = 'https://vignette.wikia.nocookie.net/civilization/images/5/5b/ExodusgateCCA.png';
	challengers['Mind Flower'] = 'https://vignette.wikia.nocookie.net/civilization/images/1/12/MindflowerCCA.png';
 
 	//Destiny CCA links
	challengers['Supremacy-link'] = 'http://civilization.wikia.com/wiki/Supremacy_(CivBE)';
	challengers['Purity-link'] = 'http://civilization.wikia.com/wiki/Purity_(CivBE)';
	challengers['Harmony-link'] = 'http://civilization.wikia.com/wiki/Harmony_(CivBE)';
	challengers['Domination-link'] = 'http://civilization.wikia.com/wiki/Victory_(CivBE)';
	challengers['Contact-link'] = 'http://civilization.wikia.com/wiki/Victory_(CivBE)';
	challengers['Promised Land (Purity)-link'] = 'http://civilization.wikia.com/wiki/Victory_(CivBE)';
	challengers['Transcendence (Harmony)-link'] = 'http://civilization.wikia.com/wiki/Victory_(CivBE)';	
	challengers['Emancipation (Supremacy)-link'] = 'http://civilization.wikia.com/wiki/Victory_(CivBE)';		
 	challengers['Xeno Titan-link'] = 'http://civilization.wikia.com/wiki/Xeno_Titan_(CivBE)';
	challengers['LEV Destroyer-link'] = 'http://civilization.wikia.com/wiki/LEV_Destroyer_(CivBE)';
	challengers['ANGEL-link'] = 'http://civilization.wikia.com/wiki/ANGEL_(CivBE)';
	challengers['The Iron Pact-link'] = 'http://civilization.wikia.com/wiki/Mods_(CivBE)';
	challengers['The Vesperian Confederacy-link'] = 'http://civilization.wikia.com/wiki/Mods_(CivBE)';
	challengers['InfoAddict-link'] = 'http://civilization.wikia.com/wiki/Mods_(CivBE)';
	challengers['Colorful Tech Web-link'] = 'http://civilization.wikia.com/wiki/Mods_(CivBE)';
	challengers['True Terraforming-link'] = 'http://civilization.wikia.com/wiki/Mods_(CivBE)';
	challengers['American Reclamation Corporation (ARC)-link'] = 'http://civilization.wikia.com/wiki/Starting_a_new_game_(CivBE)#Sponsor';
	challengers['Pan-Asian Cooperative (PAC)-link'] = 'http://civilization.wikia.com/wiki/Starting_a_new_game_(CivBE)#Sponsor';
	challengers['Franco-Iberia-link'] = 'http://civilization.wikia.com/wiki/Starting_a_new_game_(CivBE)#Sponsor';
	challengers['Slavic Federation-link'] = 'http://civilization.wikia.com/wiki/Starting_a_new_game_(CivBE)#Sponsor';
	challengers['Polystralia-link'] = 'http://civilization.wikia.com/wiki/Starting_a_new_game_(CivBE)#Sponsor';
	challengers['Kavithan Protectorate-link'] = 'http://civilization.wikia.com/wiki/Starting_a_new_game_(CivBE)#Sponsor';
	challengers['Brasilia-link'] = 'http://civilization.wikia.com/wiki/Starting_a_new_game_(CivBE)#Sponsor';
	challengers['People\'s African Union (PAU)-link'] = 'http://civilization.wikia.com/wiki/Starting_a_new_game_(CivBE)#Sponsor';
	challengers['Kraken-link'] = 'http://civilization.wikia.com/wiki/Aliens_(CivBE)';
	challengers['Sea Dragon-link'] = 'http://civilization.wikia.com/wiki/Aliens_(CivBE)';
	challengers['Manticore-link'] = 'http://civilization.wikia.com/wiki/Aliens_(CivBE)';
	challengers['Siege Worm-link'] = 'http://civilization.wikia.com/wiki/Aliens_(CivBE)';
	challengers['Raptor Bug-link'] = 'http://civilization.wikia.com/wiki/Aliens_(CivBE)';
	challengers['Rocktopus-link'] = 'http://civilization.wikia.com/wiki/Rocktopus_(CivBE)';
	challengers['Planet Carver-link'] = 'http://civilization.wikia.com/wiki/Planet_Carver_(CivBE)';
	challengers['Deep Space Telescope-link'] = 'http://civilization.wikia.com/wiki/Deep_Space_Telescope_(CivBE)';
	challengers['All-Seer-link'] = 'http://civilization.wikia.com/wiki/All-Seer_(CivBE)';
	challengers['Beacon-link'] = 'http://civilization.wikia.com/wiki/Contact_Beacon_(CivBE)';
	challengers['Emancipation Gate-link'] = 'http://civilization.wikia.com/wiki/Emancipation_Gate_%28CivBE%29';
	challengers['Exodus Gate-link'] = 'http://civilization.wikia.com/wiki/Exodus_Gate_%28CivBE%29';
	challengers['Mind Flower-link'] = 'http://civilization.wikia.com/wiki/Mind_Flower_%28CivBE%29';
 
 	challengerPoll = {
		init: function() {
			$('.ajax-poll').each(function() {
				var pollID = $(this).attr('id').split('-')[2];
				$('.pollAnswerName label', this).each(function(index) {
					var challenger = $(this).text();
					var radioID = $('input', this).attr('id');
					var radioValue = $('input', this).attr('value');
					var challenger1 = challenger.trim();
					challengerPoll.beautify(this, challenger1, pollID, radioID, radioValue);
				});
			});
 
			$('.ajax-poll').on('click', '.challenger img', function() {
				var currentPoll = $(this).parents().find('.ajax-poll').get(0);
				$(this).closest('.ajax-poll').children().find('.challenger').attr('class','challenger');
				$(this).parent().addClass('active');
 
				var pollID = $(this).attr('data-poll');
				var pollRadio = $(this).attr('data-radio');
				var pollValue = $(this).attr('data-value');
				var params = {};
				params['action'] = 'ajax';
				params['rs'] = 'axAjaxPollSubmit';
				params['title'] = wgPageName;
				params['wpPollId'] = pollID;
				params['wpVote'] = 'Vote!';
				params[pollRadio] = pollValue;
				$.post('index.php', params, function(data) {
					var total = data.total;
					$('.pollAnswerVotes', currentPoll).each(function() {
						var votedSpan = $('span', this);
						var votedBar = $('div', this);
						var currentValue = $('span', this).attr('id').split('-')[1];
 
						if (typeof data.votes[currentValue] != 'undefined') {
							$(votedSpan).text(data.votes[currentValue].value);
							$(votedSpan).attr('title',data.votes[currentValue].percent + '%');
							$(votedBar).css('width',data.votes[currentValue].percent + '%');
						}
						else {
							$(votedSpan).text('0');
							$(votedSpan).attr('title','0%');
							$(votedBar).css('width','0%');						
						}
					});		
				}, "json");
			});
 
		},	
		beautify: function(element, challenger, poll, radio, value) {
			var challengerLink = challenger + '-link';
			$(element).html('<a href="' + challengers[challengerLink] +'"><div class="name">' + challenger + '</div></a><div class="challenger"><img data-poll="' + poll +'" data-radio="' + radio + '" data-value="' + value + '" style="width: 100px; height: 100px;" class="challenger-image" src="' + challengers[challenger] + '" alt="' + challenger + '"></div>');
		}
	};
 
	$(document).ready(function() {
		$('.ajax-poll .total').parent().attr('class','description');
		$('.ajax-poll .pollAnswerVotes span').each(function () {
			var titleReplace = $(this).attr('title');
			if (titleReplace == 0) {
				$(this).attr('title','0%');				
			}
			else if (titleReplace) {
				var titleReplace = titleReplace.replace(/[^[0-9\,\.\%]+/g,'');
				$(this).attr('title',titleReplace);
			}
			else {
				$(this).attr('title','0%');		
			}
		});
		challengerPoll.init();
	});
}