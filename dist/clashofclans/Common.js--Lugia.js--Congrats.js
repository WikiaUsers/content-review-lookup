var editcount=new Array();
function drawCanvas(i){
	console.log('LUGIA: Called drawCanvas() with '+i);
	var c=document.getElementsByClassName('_congedit__');
	var con=c[i].getContext('2d');
	con.rect(100,50,200,100);
	con.stroke();
	con.moveTo(100,50);
	con.lineTo(120,40);
	con.stroke();
	con.moveTo(120,40);
	con.lineTo(120,50);
	con.stroke();
	con.moveTo(120,40);
	con.lineTo(80,40);
	con.stroke();
	con.moveTo(100,140);
	con.lineTo(80,140);
	con.stroke();
	con.moveTo(80,140);
	con.lineTo(80,40);
	con.stroke();
	con.moveTo(80,130);
	con.lineTo(20,130);
	con.stroke();
	con.moveTo(100,30);
	con.lineTo(20,30);
	con.stroke();
	con.moveTo(100,30);
	con.lineTo(100,40);
	con.stroke();
	con.moveTo(80,40);
	con.lineTo(100,30); 
	con.stroke();
	con.moveTo(20,130);
	con.lineTo(60,80);
	con.stroke();
	con.moveTo(60,80);
	con.lineTo(20,30);
	con.stroke();
	con.moveTo(280,40);
	con.lineTo(300,50);
	con.stroke();
	con.moveTo(280,40);
	con.lineTo(320,40);
	con.stroke();
	con.moveTo(300,140);
	con.lineTo(320,140);
	con.stroke();
	con.moveTo(320,140);
	con.lineTo(320,40);
	con.stroke();
	con.moveTo(280,40);
	con.lineTo(280,50);
	con.stroke();
	con.moveTo(300,30);
	con.lineTo(300,40);
	con.stroke();
	con.moveTo(300,30);
	con.lineTo(320,40);
	con.stroke();
	con.moveTo(380,30);
	con.lineTo(300,30);
	con.stroke();
	con.moveTo(380,130);
	con.lineTo(320,130);
	con.stroke();
	con.moveTo(380,130);
	con.lineTo(340,80);
	con.stroke();
	con.moveTo(380,30);
	con.lineTo(340,80);
	con.stroke();
	con.textAlign='center';
	con.font="22px Arial";
	con.fillText('Congratulations on',c[i].width/2,75);
	con.font="50px Arial";
	con.fillText(editcount[i],c[i].width/2,125);
}

function startCong(){
	window.setTimeout(function(){
		var d=document.getElementsByClassName('_congredit_');
		for(var i=0;i<d.length;i++){
			var c=parseInt(d[i].getAttribute('data-editcount'));
			if(isNaN(c)) break;
			if(c>999999) break;
			c=c.toString(10);
			if(c.length>3) editcount.push(c.substr(0,c.length-3)+','+c.substr(c.length-3));
			else editcount.push(c);
			var can=document.createElement('canvas');
			can.setAttribute('class','_congedit__');
			can.setAttribute('height','200px');
			can.setAttribute('width','400px');
			can.innerHTML='Your browser does not support the HTML5 Canvas object';
			d[i].appendChild(can);
			drawCanvas(i);
			console.log('LUGIA: Run '+i);
		}
	},1000);
}
addOnloadHook(startCong);