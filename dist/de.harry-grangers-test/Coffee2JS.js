(function(){var e,r,n,t,o,i,a,l,u,s,c,f,p,h,d,m,x,g={}.hasOwnProperty;if(a=require("fs"),m=require("vm"),h=require("path"),e=require("./lexer").Lexer,p=require("./parser").parser,l=require("./helpers"),r=require("./sourcemap"),f=require("../../package.json"),exports.VERSION=f.version,exports.FILE_EXTENSIONS=[".coffee",".litcoffee",".coffee.md"],exports.helpers=l,n=function(e){switch(!1){case"function"!=typeof Buffer:return new Buffer(e).toString("base64");case"function"!=typeof btoa:return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,r){return String.fromCharCode("0x"+r)}));default:throw new Error("Unable to base64 encode inline sourcemap.")}},x=function(e){return function(r,n){var t;null==n&&(n={});try{return e.call(this,r,n)}catch(e){if(t=e,"string"!=typeof r)throw t;throw l.updateSyntaxError(t,r,n.filename)}}},exports.compile=t=x(function(e,t){var o,i,a,u,s,f,h,d,m,x,g,y,E,S,I,b,q,T,_,v,N,w,R;if(I=l.merge,u=l.extend,t=u({},t),h=t.sourceMap||t.inlineMap,h&&(S=new r),w=c.tokenize(e,t),t.referencedVars=function(){var e,r,n;for(n=[],e=0,r=w.length;e<r;e++)N=w[e],"IDENTIFIER"===N[0]&&n.push(N[1]);return n}(),null==t.bare||t.bare!==!0)for(m=0,y=w.length;m<y;m++)if(N=w[m],"IMPORT"===(q=N[0])||"EXPORT"===q){t.bare=!0;break}for(f=p.parse(w).compileToFragments(t),i=0,t.header&&(i+=1),t.shiftLine&&(i+=1),o=0,g="",x=0,E=f.length;x<E;x++)s=f[x],h&&(s.locationData&&!/^[;\s]*$/.test(s.code)&&S.add([s.locationData.first_line,s.locationData.first_column],[i,o],{noReplace:!0}),b=l.count(s.code,"\n"),i+=b,b?o=s.code.length-(s.code.lastIndexOf("\n")+1):o+=s.code.length),g+=s.code;return t.header&&(d="Generated by CoffeeScript "+this.VERSION,g="// "+d+"\n"+g),h&&(R=S.generate(t,e)),t.inlineMap&&(a=n(JSON.stringify(R)),_="//# sourceMappingURL=data:application/json;base64,"+a,v="//# sourceURL="+(null!=(T=t.filename)?T:"coffeescript"),g=g+"\n"+_+"\n"+v),t.sourceMap?{js:g,sourceMap:S,v3SourceMap:JSON.stringify(R,null,2)}:g}),exports.tokens=x(function(e,r){return c.tokenize(e,r)}),exports.nodes=x(function(e,r){return"string"==typeof e?p.parse(c.tokenize(e,r)):p.parse(e)}),exports.run=function(e,r){var n,o,i,u;return null==r&&(r={}),i=require.main,i.filename=process.argv[1]=r.filename?a.realpathSync(r.filename):".",i.moduleCache&&(i.moduleCache={}),o=r.filename?h.dirname(a.realpathSync(r.filename)):a.realpathSync("."),i.paths=require("module")._nodeModulePaths(o),l.isCoffee(i.filename)&&!require.extensions||(n=t(e,r),e=null!=(u=n.js)?u:n),i._compile(e,i.filename)},exports.eval=function(e,r){var n,o,i,a,l,u,s,c,f,p,d,x,y,E,S,I,b;if(null==r&&(r={}),e=e.trim()){if(a=null!=(x=m.Script.createContext)?x:m.createContext,u=null!=(y=m.isContext)?y:function(e){return r.sandbox instanceof a().constructor},a){if(null!=r.sandbox){if(u(r.sandbox))I=r.sandbox;else{I=a(),E=r.sandbox;for(c in E)g.call(E,c)&&(b=E[c],I[c]=b)}I.global=I.root=I.GLOBAL=I}else I=global;if(I.__filename=r.filename||"eval",I.__dirname=h.dirname(I.__filename),I===global&&!I.module&&!I.require){for(n=require("module"),I.module=o=new n(r.modulename||"eval"),I.require=i=function(e){return n._load(e,o,!0)},o.filename=I.__filename,S=Object.getOwnPropertyNames(require),l=0,f=S.length;l<f;l++)d=S[l],"paths"!==d&&"arguments"!==d&&"caller"!==d&&(i[d]=require[d]);i.paths=o.paths=n._nodeModulePaths(process.cwd()),i.resolve=function(e){return n._resolveFilename(e,o)}}}p={};for(c in r)g.call(r,c)&&(b=r[c],p[c]=b);return p.bare=!0,s=t(e,p),I===global?m.runInThisContext(s):m.runInContext(s,I)}},exports.register=function(){return require("./register")},require.extensions)for(d=this.FILE_EXTENSIONS,i=function(e){var r;return null!=(r=require.extensions)[e]?r[e]:r[e]=function(){throw new Error("Use CoffeeScript.register() or require the coffee-script/register module to require "+e+" files.")}},u=0,s=d.length;u<s;u++)o=d[u],i(o);exports._compileFile=function(e,r,n){var o,i,u,s;null==r&&(r=!1),null==n&&(n=!1),u=a.readFileSync(e,"utf8"),s=65279===u.charCodeAt(0)?u.substring(1):u;try{o=t(s,{filename:e,sourceMap:r,inlineMap:n,sourceFiles:[e],literate:l.isLiterate(e)})}catch(r){throw i=r,l.updateSyntaxError(i,s,e)}return o},c=new e,p.lexer={lex:function(){var e,r;return r=p.tokens[this.pos++],r?(e=r[0],this.yytext=r[1],this.yylloc=r[2],p.errorToken=r.origin||r,this.yylineno=this.yylloc.first_line):e="",e},setInput:function(e){return p.tokens=e,this.pos=0},upcomingInput:function(){return""}},p.yy=require("./nodes"),p.yy.parseError=function(e,r){var n,t,o,i,a,u;return a=r.token,i=p.errorToken,u=p.tokens,t=i[0],o=i[1],n=i[2],o=function(){switch(!1){case i!==u[u.length-1]:return"end of input";case"INDENT"!==t&&"OUTDENT"!==t:return"indentation";case"IDENTIFIER"!==t&&"NUMBER"!==t&&"INFINITY"!==t&&"STRING"!==t&&"STRING_START"!==t&&"REGEX"!==t&&"REGEX_START"!==t:return t.replace(/_START$/,"").toLowerCase();default:return l.nameWhitespaceCharacter(o)}}(),l.throwSyntaxError("unexpected "+o,n)}}).call(this);
//# sourceMappingURL=coffee-script.min.js.map