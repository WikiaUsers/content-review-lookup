//function X2Mix()
//{
  var itemName = [];
  var itemRank = [];
  var itemType = [];
  itemName[0] = "Potion";
  itemRank[0] = 3;
  itemType[0] = 0;
  itemName[1] = "Hi-Potion";
  itemRank[1] = 2;
  itemType[1] = 0;
  itemName[2] = "X-Potion";
  itemRank[2] = 1;
  itemType[2] = 0;
  itemName[3] = "Mega-Potion";
  itemRank[3] = 1;
  itemType[3] = 0;
  itemName[4] = "Ether";
  itemRank[4] = 2;
  itemType[4] = 0;
  itemName[5] = "Turbo Ether";
  itemRank[5] = 1;
  itemType[5] = 0;
  itemName[6] = "Phoenix Down";
  itemRank[6] = 3;
  itemType[6] = 1;
  itemName[7] = "Mega Phoenix";
  itemRank[7] = 2;
  itemType[7] = 1;
  itemName[8] = "Elixir";
  itemRank[8] = 1;
  itemType[8] = 0;
  itemName[9] = "Megalixir";
  itemRank[9] = 0;
  itemType[9] = 0;
  itemName[10] = "Antidote";
  itemRank[10] = 3;
  itemType[10] = 2;
  itemName[11] = "Soft";
  itemRank[11] = 3;
  itemType[11] = 2;
  itemName[12] = "Eye Drops";
  itemRank[12] = 3;
  itemType[12] = 2;
  itemName[13] = "Echo Screen";
  itemRank[13] = 3;
  itemType[13] = 2;
  itemName[14] = "Holy Water";
  itemRank[14] = 3;
  itemType[14] = 8;
  itemName[15] = "Remedy";
  itemRank[15] = 2;
  itemType[15] = 2;
  itemName[16] = "Budget Grenade";
  itemRank[16] = 3;
  itemType[16] = 3;
  itemName[17] = "Grenade";
  itemRank[17] = 2;
  itemType[17] = 3;
  itemName[18] = "S-Bomb";
  itemRank[18] = 2;
  itemType[18] = 3;
  itemName[19] = "M-Bomb";
  itemRank[19] = 2;
  itemType[19] = 3;
  itemName[20] = "L-Bomb";
  itemRank[20] = 1;
  itemType[20] = 3;
  itemName[21] = "Sleep Grenade";
  itemRank[21] = 2;
  itemType[21] = 10;
  itemName[22] = "Silence Grenade";
  itemRank[22] = 2;
  itemType[22] = 10;
  itemName[23] = "Dark Grenade";
  itemRank[23] = 2;
  itemType[23] = 10;
  itemName[24] = "Petrify Grenade";
  itemRank[24] = 2;
  itemType[24] = 10;
  itemName[25] = "Bomb Fragment";
  itemRank[25] = 3;
  itemType[25] = 4;
  itemName[26] = "Bomb Core";
  itemRank[26] = 2;
  itemType[26] = 4;
  itemName[27] = "Fire Gem";
  itemRank[27] = 1;
  itemType[27] = 4;
  itemName[28] = "Antarctic Wind";
  itemRank[28] = 3;
  itemType[28] = 5;
  itemName[29] = "Arctic Wind";
  itemRank[29] = 2;
  itemType[29] = 5;
  itemName[30] = "Ice Gem";
  itemRank[30] = 1;
  itemType[30] = 5;
  itemName[31] = "Electro Marble";
  itemRank[31] = 3;
  itemType[31] = 6;
  itemName[32] = "Lightning Marble";
  itemRank[32] = 2;
  itemType[32] = 6;
  itemName[33] = "Lightning Gem";
  itemRank[33] = 1;
  itemType[33] = 6;
  itemName[34] = "Fish Scale";
  itemRank[34] = 3;
  itemType[34] = 7;
  itemName[35] = "Dragon Scale";
  itemRank[35] = 2;
  itemType[35] = 7;
  itemName[36] = "Water Gem";
  itemRank[36] = 1;
  itemType[36] = 7;
  itemName[37] = "Shadow Gem";
  itemRank[37] = 2;
  itemType[37] = 9
  itemName[38] = "Shining Gem";
  itemRank[38] = 1;
  itemType[38] = 3;
  itemName[39] = "Blessed Gem";
  itemRank[39] = 1;
  itemType[39] = 8;
  itemName[40] = "Supreme Gem";
  itemRank[40] = 0;
  itemType[40] = 3;
  itemName[41] = "Poison Fang";
  itemRank[41] = 3;
  itemType[41] = 10;
  itemName[42] = "Silver Hourglass";
  itemRank[42] = 2;
  itemType[42] = 10;
  itemName[43] = "Gold Hourglass";
  itemRank[43] = 1;
  itemType[43] = 10;
  itemName[44] = "Candle of Life";
  itemRank[44] = 3;
  itemType[44] = 10;
  itemName[45] = "Farplane Shadow";
  itemRank[45] = 2;
  itemType[45] = 10;
  itemName[46] = "Dark Matter";
  itemRank[46] = 0;
  itemType[46] = 19;
  itemName[47] = "Chocobo Feather";
  itemRank[47] = 2;
  itemType[47] = 13;
  itemName[48] = "Chocobo Wing";
  itemRank[48] = 0;
  itemType[48] = 13;
  itemName[49] = "Lunar Curtain";
  itemRank[49] = 2;
  itemType[49] = 14;
  itemName[50] = "Light Curtain";
  itemRank[50] = 2;
  itemType[50] = 14;
  itemName[51] = "Star Curtain";
  itemRank[51] = 2;
  itemType[51] = 15;
  itemName[52] = "Healing Spring";
  itemRank[52] = 1;
  itemType[52] = 0;
  itemName[53] = "Mana Spring";
  itemRank[53] = 3;
  itemType[53] = 16;
  itemName[54] = "Stamina Spring";
  itemRank[54] = 3;
  itemType[54] = 16;
  itemName[55] = "Soul Spring";
  itemRank[55] = 2;
  itemType[55] = 16;
  itemName[56] = "Dispel Tonic";
  itemRank[56] = 1;
  itemType[56] = 18;
  itemName[57] = "Stamina Tablet";
  itemRank[57] = 1;
  itemType[57] = 11;
  itemName[58] = "Mana Tablet";
  itemRank[58] = 1;
  itemType[58] = 12;
  itemName[59] = "Stamina Tonic";
  itemRank[59] = 0;
  itemType[59] = 11;
  itemName[60] = "Mana Tonic";
  itemRank[60] = 0;
  itemType[60] = 12;
  itemName[61] = "Twin Stars";
  itemRank[61] = 1;
  itemType[61] = 9;
  itemName[62] = "Three Stars";
  itemRank[62] = 1;
  itemType[62] = 9;
  itemName[63] = "Hero Drink";
  itemRank[63] = 3;
  itemType[63] = 17;
  itemName[64] = "Gysahl Greens";
  itemRank[64] = 2;
  itemType[64] = 0;
  itemName[65] = "Sylkis Greens";
  itemRank[65] = 2;
  itemType[65] = 0;
  itemName[66] = "Mimett Greens";
  itemRank[66] = 2;
  itemType[66] = 0;
  itemName[67] = "Pahsana Greens";
  itemRank[67] = 2;
  itemType[67] = 0;

  itemTypeName = [];
  itemTypeName[0] = "Restorative";
  itemTypeName[1] = "Reviving";
  itemTypeName[2] = "Curative";
  itemTypeName[3] = "Damage";
  itemTypeName[4] = "Fire";
  itemTypeName[5] = "Ice";
  itemTypeName[6] = "Lightning";
  itemTypeName[7] = "Water";
  itemTypeName[8] = "Holy";
  itemTypeName[9] = "Gravity";
  itemTypeName[10] = "Status";
  itemTypeName[11] = "Stamina";
  itemTypeName[12] = "Mana";
  itemTypeName[13] = "Haste";
  itemTypeName[14] = "Curtain";
  itemTypeName[15] = "Star Curtain";
  itemTypeName[16] = "Spring";
  itemTypeName[17] = "Hero Drink";
  itemTypeName[18] = "Dispel Tonic";
  itemTypeName[19] = "Dark Matter";
  var container = document.getElementById("x2mixdropdown");
  container.innerHTML = "";
  var leadP = document.createElement("p");
  container.appendChild(leadP);
  leadP.innerHTML = "Select two items below to see the output Mix.";
  for(var i = 1; i < 3; i++)
  {
    var span = document.createElement("span");
    span.style.fontWeight = "bold";
    span.style.marginRight = "10px";
    span.innerHTML = "Item " + i + ":";
    var combo = document.createElement("select");
    combo.id = "item" + i + "Dropdown";
    combo.style.width = "175px";
    combo.style.marginRight = "40px";
    for(var ii = 0; ii< itemName.length; ii++)
    {
      combo.innerHTML += '<option value="' + ii + '">' + itemName[ii] + '</option>';
    }
    combo.addEventListener("change",solveMix);
    container.appendChild(span);
    container.appendChild(combo);
  }
  var hr = document.createElement("hr");
  container.appendChild(hr);
  var mixName = [];
  mixName[0] = "Hi-Potion";
  mixName[1] = "Mega-Potion";
  mixName[2] = "Ultra Potion";
  mixName[3] = "Remedy";
  mixName[4] = "Panacea";
  mixName[5] = "Ultra Cure";
  mixName[6] = "Final Elixir";
  mixName[7] = "Mega Phoenix";
  mixName[8] = "Final Phoenix";
  mixName[9] = "Fantasy Phoenix";
  mixName[10] = "Mega Vitality";
  mixName[11] = "Mega Mana";
  mixName[12] = "Mega Cocktail";
  mixName[13] = "Chocobo Wing";
  mixName[14] = "Wall";
  mixName[15] = "Hi-Wall";
  mixName[16] = "Final Wall";
  mixName[17] = "Hero Drink";
  mixName[18] = "Miracle Drink";
  mixName[19] = "Pineapple";
  mixName[20] = "Potato Masher";
  mixName[21] = "Cluster Bomb";
  mixName[22] = "Sunburst";
  mixName[23] = "Blaster Mine";
  mixName[24] = "Hazardous Shell";
  mixName[25] = "Soul Spring";
  mixName[26] = "Soul Sea";
  mixName[27] = "Heat Blaster";
  mixName[28] = "Firestorm";
  mixName[29] = "Burning Soul";
  mixName[30] = "Brimstone";
  mixName[31] = "Abaddon Flame";
  mixName[32] = "Snow Flurry";
  mixName[33] = "Icefall";
  mixName[34] = "Winter Storm";
  mixName[35] = "Black Ice";
  mixName[36] = "Krysta";
  mixName[37] = "Thunderbolt";
  mixName[38] = "Rolling Thunder";
  mixName[39] = "Lightning Bolt";
  mixName[40] = "Electroshock";
  mixName[41] = "Thunderblast";
  mixName[42] = "Waterfall";
  mixName[43] = "Flash Flood";
  mixName[44] = "Tidal Wave";
  mixName[45] = "Aqua Toxin";
  mixName[46] = "Dark Rain";
  mixName[47] = "Nega Burst";
  mixName[48] = "Black Hole";
  mixName[49] = "Tallboy";
  mixName[50] = "Grand Slam";
  mixName[51] = "Archangel";
  mixName[52] = "White Hole";

  mixResult = [];
  for(var i = 0; i < 24; i++)
  {
    mixResult[i] = [];
  }
  mixType = [];
  mixType[0] = "Damage";
  mixResult[0][0] = 22;
  mixResult[0][1] = 21;
  mixResult[0][2] = 20;
  mixResult[0][3] = 19;
  mixType[1] = "Fire";
  mixResult[1][0] = 29;
  mixResult[1][1] = 29;
  mixResult[1][2] = 28;
  mixResult[1][3] = 27;
  mixType[2] = "Ice";
  mixResult[2][0] = 34;
  mixResult[2][1] = 34;
  mixResult[2][2] = 33;
  mixResult[2][3] = 32;
  mixType[3] = "Lightning";
  mixResult[3][0] = 39;
  mixResult[3][1] = 39;
  mixResult[3][2] = 38;
  mixResult[3][3] = 37;
  mixType[4] = "Water";
  mixResult[4][0] = 44;
  mixResult[4][1] = 44;
  mixResult[4][2] = 43;
  mixResult[4][3] = 42;
  mixType[5] = "Holy";
  mixResult[5][0] = 52;
  mixResult[5][1] = 52;
  mixResult[5][2] = 51;
  mixResult[5][3] = 51;
  mixType[6] = "Gravity";
  mixResult[6][0] = 48;
  mixResult[6][1] = 48;
  mixResult[6][2] = 47;
  mixResult[6][3] = 47;
  mixType[7] = "Damage Status";
  mixResult[7][0] = 24;
  mixResult[7][1] = 24;
  mixResult[7][2] = 23;
  mixResult[7][3] = 23;
  mixType[8] = "Fire Status";
  mixResult[8][0] = 31;
  mixResult[8][1] = 31;
  mixResult[8][2] = 30;
  mixResult[8][3] = 30;
  mixType[9] = "Ice Status";
  mixResult[9][0] = 36;
  mixResult[9][1] = 36;
  mixResult[9][2] = 35;
  mixResult[9][3] = 35;
  mixType[10] = "Lightning Status";
  mixResult[10][0] = 41;
  mixResult[10][1] = 41;
  mixResult[10][2] = 40;
  mixResult[10][3] = 40;
  mixType[11] = "Water Status";
  mixResult[11][0] = 46;
  mixResult[11][1] = 46;
  mixResult[11][2] = 45;
  mixResult[11][3] = 45;
  mixType[12] = "Gravity Status";
  mixResult[12][0] = 50;
  mixResult[12][1] = 50;
  mixResult[12][2] = 49;
  mixResult[12][3] = 49;
  mixType[13] = "Reviving";
  mixResult[13][0] = 9;
  mixResult[13][1] = 8;
  mixResult[13][2] = 8;
  mixResult[13][3] = 7;
  mixType[14] = "Restorative";
  mixResult[14][0] = 6;
  mixResult[14][1] = 2;
  mixResult[14][2] = 1;
  mixResult[14][3] = 0;
  mixType[15] = "Curative";
  mixResult[15][0] = -1;
  mixResult[15][1] = -1;
  mixResult[15][2] = 4;
  mixResult[15][3] = 3;
  mixType[16] = "Absorb";
  mixResult[16][0] = 26;
  mixResult[16][1] = 26;
  mixResult[16][2] = 25;
  mixResult[16][3] = 25;
  mixType[17] = "Stamina";
  mixResult[17][0] = 12;
  mixResult[17][1] = 10;
  mixResult[17][2] = -1;
  mixResult[17][3] = -1;
  mixType[18] = "Mana";
  mixResult[18][0] = 12;
  mixResult[18][1] = 11;
  mixResult[18][2] = -1;
  mixResult[18][3] = -1;
  mixType[19] = "Haste";
  mixResult[19][0] = 16;
  mixResult[19][1] = -1;
  mixResult[19][2] = 13;
  mixResult[19][3] = -1;
  mixType[20] = "Wall";
  mixResult[20][0] = -1;
  mixResult[20][1] = -1;
  mixResult[20][2] = 14;
  mixResult[20][3] = -1;
  mixType[21] = "Hi-Wall";
  mixResult[21][0] = -1;
  mixResult[21][1] = -1;
  mixResult[21][2] = 15;
  mixResult[21][3] = -1;
  mixType[22] = "Drink";
  mixResult[22][0] = 18;
  mixResult[22][1] = -1;
  mixResult[22][2] = -1;
  mixResult[22][3] = 17;
  mixType[23] = "Ultra Cure";
  mixResult[23][0] = -1;
  mixResult[23][1] = 5;
  mixResult[23][2] = -1;
  mixResult[23][3] = -1;
  var result = document.createElement("table");
  result.id = "mixresultcalc";
  result.className = "full-width";
  var itemPageName = "List of Final Fantasy X-2 items";
  var mixPageName = "Mix (Final Fantasy X-2)";
  var itemurl = mw.util.getUrl(itemPageName) + "#";
  var mixurl = mw.util.getUrl(mixPageName) + "#";
  container.appendChild(result);
  if(wgTitle==mixPageName) {
    var table = document.createElement("table");
    table.className ="full-width table X2";
    var tr = table.insertRow();
    tr.className = "a";
    tr = table.insertRow();
    table.id = "mixresulttable";
    container.appendChild(table);
  }
  solveMix();

function solveMix()
{
  var item1 = document.getElementById("item1Dropdown").selectedIndex;
  var item2 = document.getElementById("item2Dropdown").selectedIndex;
  var pItem = 0;
  var sItem = 0;
  if(itemRank[item1] <= itemRank[item2])
  {
    pItem = item1;
    sItem = item2;
  }
  else
  {
    pItem = item2;
    sItem = item1;
  }
  var rank = itemRank[pItem];
  var type = 0;
  switch(itemType[pItem])
  {
    case 0:
      switch(itemType[sItem])
      {
        case 1:
          type = 13;
          break;
        default:
          type = 14;
          break;
      }
      break;
    case 1:
      type = 13;
      break;
    case 2:
      type = 15;
      break;
    case 3:
      type = 0;
      break;
    case 4:
      switch(itemType[sItem])
      {
        case 8:
          type = 5;
          break;
        case 10:
          type = 8;
          break;
        case 5:
          type = 0;
          break;
        default:
          type = 1;
          break;
      }
      break;
    case 5:
      switch(itemType[sItem])
      {
        case 8:
          type = 5;
          break;
        case 10:
          type = 9;
          break;
        case 4:
          type = 0;
          break;
        default:
          type = 2;
          break;
      }
      break;
    case 6:
      switch(itemType[sItem])
      {
        case 8:
          type = 5;
          break;
        case 10:
          type = 10;
          break;
        case 7:
          type = 0;
          break;
        default:
          type = 3;
          break;
      }
      break;
    case 7:
      switch(itemType[sItem])
      {
        case 8:
          type = 5;
          break;
        case 10:
          type = 11;
          break;
        case 6:
          type = 0;
          break;
        default:
          type = 4;
          break;
      }
      break;
    case 8:
      type = 5;
      break;
    case 9:
      switch(itemType[sItem])
      {
        case 8:
          type = 5;
          break;
        case 10:
          type = 12;
          break;
        default:
          type = 6;
          break;
      }
      break;
    case 10:
      switch(itemType[sItem])
      {
        case 4:
          type = 8;
          break;
        case 5:
          type = 9;
          break;
        case 6:
          type = 10;
          break;
        case 7:
          type = 11;
          break;
        case 9:
          type = 12;
          break;
        default:
          type = 7;
          break;
      }
      break;
    case 11:
      switch(itemType[sItem])
      {
        case 10:
          type = 7;
          break;
        case 12:
          type = 16;
          break;
        default:
          type = 17;
          break;
      }
      break;
    case 12:
      switch(itemType[sItem])
      {
        case 10:
          type = 7;
          break;
        case 11:
          type = 16;
          break;
        default:
          type = 18;
          break;
      }
      break;
    case 13:
      switch(itemType[sItem])
      {
        case 10:
          type = 7;
          break;
        default:
          type = 19;
          break;
      }
      break;
    case 14:
      switch(itemType[sItem])
      {
        case 10:
          type = 7;
          break;
        default:
          type = 20;
          break;
      }
      break;
    case 15:
      switch(itemType[sItem])
      {
        case 10:
          type = 7;
          break;
        default:
          type = 21;
          break;
      }
      break;
    case 16:
      switch(itemType[sItem])
      {
        case 10:
          type = 7;
          break;
        default:
          type = 16;
          break;
      }
      break;
    case 17:
      switch(itemType[sItem])
      {
        case 10:
          type = 7;
          break;
        default:
          type = 22;
          break;
      }
      break;
    case 18:
      type = 23;
      break;
    case 19:
      type = 22;
      break;
  }

  var itmName1 = itemName[item1];
  var itmName2 = itemName[item2];
  var itmType1 = itemTypeName[itemType[item1]] + ' item';
  var itmType2 = itemTypeName[itemType[item2]] + ' item';
  var itmName1Enc = itmName1.replace(/\s+/g,"_");
  var itmName2Enc = itmName2.replace(/\s+/g,"_");
  var itmType1Enc = itmType1.replace(/\s+/g,"_");
  var itmType2Enc = itmType2.replace(/\s+/g,"_");
  var resName = mixName[mixResult[type][rank]];
  var resNameEnc = resName.replace(/\s+/g,"_");
  var resType = mixType[type];
  var resTypeEnc = resType.replace(/\s+/g,"_");
  document.getElementById("mixresultcalc").innerHTML = '<tr>'
    + '<td style="width:25%"><a title="' + itmName1 + '" href="' + itemurl + itmName1Enc + '">' + itmName1 + '</a><br/>Type: <a title="' + itmType1 + '" href="' + mixurl + itmType1Enc +'">' + itemTypeName[itemType[item1]] + '</a><br/>Priority: ' + (itemRank[item1] + 1) + '</td>'
    + '<td style="width:12%">+</td>'
    + '<td style="width:25%"><a title="' + itmName2 + '" href="' + itemurl + itmName2Enc + '">' + itmName2 + '</a><br/>Type: <a title="' + itmType2 + '" href="' + mixurl + itmType2Enc + '">' + itemTypeName[itemType[item2]] + '</a><br/>Priority: ' + (itemRank[item2]+1) + '</td>'
    + '<td style="width:12%">=</td>'
    + '<td style="width:25%"><a title="' + resName + '" href="' + mixurl + resNameEnc + '">' + resName + '</a><br/>Type: <a title="' + resType + '" href="' + mixurl + resTypeEnc + '_mix">' + resType + '</a><br/>Rank: ' + (rank+1) + '</td></tr>';
  //I don't know if editing the rows of a table is better than
  //deleting and reconstructing each time
  var table = document.getElementById("mixresulttable");
  if(!table) return;
  var mixSource = document.getElementById(resNameEnc);
  mixSource = mixSource.getFirstAncestorByTagName("tr",10);
  if(!mixSource) return;
  var tHead = mixSource.getFirstAncestorByTagName("table",10);
  if(!tHead) return;
  tHead = tHead.rows[0];
  table.rows[0].innerHTML = tHead.innerHTML;
  table.rows[1].innerHTML = mixSource.innerHTML;
  table.rows[1].cells[0].id = "";
  mixrow = table.getElementsByTagAndClass("th", "b");
  mixrow[0].innerHTML='<a title="' + resNameEnc + '" href="' + mixurl + resNameEnc + '">' + resName +'</a>';
}